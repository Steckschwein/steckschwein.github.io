<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>rgb on Steckschwein</title><link>https://beta.steckschwein.de/categories/rgb/</link><description>Recent content in rgb on Steckschwein</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><lastBuildDate>Sat, 15 Dec 2018 00:00:00 +0000</lastBuildDate><atom:link href="https://beta.steckschwein.de/categories/rgb/index.xml" rel="self" type="application/rss+xml"/><item><title>V9958+OPL2-Boards are there</title><link>https://beta.steckschwein.de/post/v9958opl2-boards-are-there/</link><pubDate>Sat, 15 Dec 2018 00:00:00 +0000</pubDate><guid>https://beta.steckschwein.de/post/v9958opl2-boards-are-there/</guid><description>The newly made boards made their way from China to Munich. Starting now, the multi board version of the Steckschwein is made up of 3 Boards: CPU/Memory, IO/UART and V9958-OPL2.
[gallery ids=&amp;ldquo;1166,1167,1168&amp;rdquo; type=&amp;ldquo;rectangular&amp;rdquo;]</description><content>&lt;p>The newly made boards made their way from China to Munich. Starting now, the multi board version of the Steckschwein is made up of 3 Boards: CPU/Memory, IO/UART and V9958-OPL2.&lt;/p>
&lt;p>[gallery ids=&amp;ldquo;1166,1167,1168&amp;rdquo; type=&amp;ldquo;rectangular&amp;rdquo;]&lt;/p></content></item><item><title>New V9958-Board with integrated OPL2</title><link>https://beta.steckschwein.de/post/new-v9958-board-with-integrated-opl2/</link><pubDate>Fri, 07 Dec 2018 00:00:00 +0000</pubDate><guid>https://beta.steckschwein.de/post/new-v9958-board-with-integrated-opl2/</guid><description>It&amp;rsquo;s time for another hardware upgrade. Since we really want to get our single board Steckschwein done, we are going for higher integration of our multiboard prototype. After integrating the UART to the IO-Board, we integrate the OPL2 sound part onto the V9958 video board, so the current Steckschwein multi board incarnations are reduced to three boards. We did postpone our plan to upgrade sound to OPL3 because Daniel Illgen, which we met at VCFb, convinced us with some awesome OPL2 tunes that OPL2 is still cool.</description><content>&lt;p>It&amp;rsquo;s time for another hardware upgrade. Since we really want to get our single board Steckschwein done, we are going for higher integration of our multiboard prototype. After integrating the UART to the IO-Board, we integrate the OPL2 sound part onto the V9958 video board, so the current Steckschwein multi board incarnations are reduced to three boards. We did postpone our plan to upgrade sound to OPL3 because Daniel Illgen, which we met at VCFb, convinced us with some awesome OPL2 tunes that OPL2 is still cool. Also, we save the extra oscillator, since the OPL2 can be clocked using the CPUCLK-Pin from the V9958, which happens to provide 3.58MHz.&lt;/p>
&lt;p>We did upgrade however the video ram. The first prototype had Bank 0 and Bank 1, maxing out vram at 128k. We decided to include the Extended memory bank, too, this time, giving the V9958 extra 64k, which can be accessed using the blitter command functions. Why not?&lt;/p>
&lt;p>&lt;img src="images/v9958-e1544277948324.png" alt=""> KiCad 3D rendering of the new board&lt;/p>
&lt;p>Also, to make the connector side more compact, we decided to not use RCA jacks for RGB anymore, but an 8pin DIN jack, which also carries the audio signal. So hooking up a 1084 Monitor or TV will only require a single cable. We use the same DIN jack and &lt;a href="https://gamesx.com/avpinouts/neoav.htm">pinout as the NeoGeo&lt;/a> uses, so there are even &lt;a href="https://www.retrogamingcables.co.uk/snk-neo-geo-aes-rgb-scart-cable-stereo-sound">ready made cables available&lt;/a>.&lt;/p></content></item><item><title>V9958 - Es ist vollbracht</title><link>https://beta.steckschwein.de/post/v9958-es-ist-vollbracht/</link><pubDate>Sat, 17 Mar 2018 00:00:00 +0000</pubDate><guid>https://beta.steckschwein.de/post/v9958-es-ist-vollbracht/</guid><description>Da ist sie nun, die neuen Videoplatine. Nach einigen Umwegen hat der Packen Boards uns erreicht (die erste Lieferung ist versehentlich in Spanien gelandet, während wir die Platinen des spanischen Bastlers erhalten haben. Inzwischen hat jeder Ersatz erhalten).
Wir haben ja bekanntlich unsere Vorgehensweise geändert, indem wir schneller Platinen anfertigen lassen. Aber zu unserer großen Freude funktionierte die erste Platine nach Bestückung auf Anhieb. Selbstverständlich haben sich aber auch ein paar Patzer eingeschlichen.</description><content>&lt;p>Da ist sie nun, die neuen Videoplatine. Nach einigen Umwegen hat der Packen Boards uns erreicht (die erste Lieferung ist versehentlich in Spanien gelandet, während wir die Platinen des spanischen Bastlers erhalten haben. Inzwischen hat jeder Ersatz erhalten).&lt;/p>
&lt;p>Wir haben ja bekanntlich &lt;a href="http://steckschwein.de/2018/03/01/v9958-vom-steckbrett-zum-prototypen/">unsere Vorgehensweise geändert&lt;/a>, indem wir schneller Platinen anfertigen lassen. Aber zu unserer großen Freude funktionierte die erste Platine nach Bestückung auf Anhieb. Selbstverständlich haben sich aber auch ein paar Patzer eingeschlichen.&lt;/p>
&lt;p>&lt;img src="images/finished_board.jpg" alt="finished_board.jpg"> Die bis auf die Chinch-Buchsen fertig aufgebaute Platine&lt;/p>
&lt;p>Zunächst gabs wohl eine Verwechslung bei den Footprints für die Chinch-Buchsen. Unsere vorhandenen Buchsen passen also nicht, nirgends lassen sich passende Buchsen auftreiben. Wieso hat KiCad Footprints, die zu keinen Komponenten passen? Was nicht passt, wird passend gemacht, also müssen die Buchsen wohl etwas bearbeitet werden.&lt;/p>
&lt;p>&lt;img src="images/cinch_fix-e1520965306532.jpg" alt="cinch_fix.jpg"> Passend gemachte Buchse. Der vordere Pin wurde abgeknipst, und der mittlere Pin etwas nach vorne gebogen.&lt;/p>
&lt;p>Nach erfolgreichem Test hat sich dann ein weiteres Problem offenbart.&lt;/p>
&lt;p>&lt;img src="images/photo_2018-03-17_13-58-35.jpg" alt="photo_2018-03-17_13-58-35"> Irgendwie wirken die Farben vertauscht&lt;/p>
&lt;p>Dadurch, dass der V9958 seine Video-Ausgabepins für die Farbkanäle nicht in der Reihenfolge RGB, sondern GRB angeordnet hat, sind im Schaltplan Rot und Blau verwechselt worden. Glücklicherweise gehen die Farbsignale über Koppelkondensatoren an den CXA2075M, sodass der Fix erstmal darin besteht, C9 und C12 über Kreuz einzulöten.&lt;/p>
&lt;p>&lt;img src="images/fixed_board.jpg" alt="fixed_board"> Das Board mit Cinch-Buchsen und Farb-Fix. Fehlt noch die S-Video-Buchse&lt;/p>
&lt;p>Oh, und es soll nicht unerwähnt bleiben, dass wir uns erstmals getraut haben, mit dem CXA2075M einen SMD-Chip zu verbauen.&lt;/p></content></item><item><title>Es wird wieder gesteckt</title><link>https://beta.steckschwein.de/post/es-wird-wieder-gesteckt/</link><pubDate>Sat, 09 Dec 2017 00:00:00 +0000</pubDate><guid>https://beta.steckschwein.de/post/es-wird-wieder-gesteckt/</guid><description>Wir haben uns schon länger ein Upgrade des Videochips des Steckschweins vorgenommen. Der TMS9929 ist ein netter Chip, aber an einem 8MHz-65c02, der dazu noch so coole Hardware-Features hat, fühlt er sich ein bisschen wie die Achillesferse an.
Zum Glück war beim TMS9929 nicht Schluss, denn dieser hat im Laufe der Zeit diverse Nachfolger bekommen, welche von Yamaha hergestellt wurden und in diversen Weiterentwicklungen des MSX-Standards Verwendung fanden.
Der direkte Nachfolger der TMS99xx-Reihe ist der V9938.</description><content>&lt;p>Wir haben uns schon länger ein Upgrade des Videochips des Steckschweins vorgenommen. Der TMS9929 ist ein netter Chip, aber an einem 8MHz-65c02, der dazu noch so coole Hardware-Features hat, fühlt er sich ein bisschen wie die Achillesferse an.&lt;/p>
&lt;p>Zum Glück war beim TMS9929 nicht Schluss, denn dieser hat im Laufe der Zeit diverse Nachfolger bekommen, welche von Yamaha hergestellt wurden und in diversen Weiterentwicklungen des MSX-Standards Verwendung fanden.&lt;/p>
&lt;p>Der direkte Nachfolger der TMS99xx-Reihe ist der &lt;a href="https://en.wikipedia.org/wiki/Yamaha_V9938">V9938&lt;/a>. Dieser kam 1984 raus, also ganze 7 Jahre nachdem der TMS9918/9929 erschienen ist, und hat dementsprechend auch einiges mehr drauf, z.B.:&lt;/p>
&lt;ul>
&lt;li>ein 80x24 Zeichen-Textmodus&lt;/li>
&lt;li>maximale Auflösung von 512 × 212 (16 Farben von 512)&lt;/li>
&lt;li>32 Sprites, davon max. 8 auf einer Rasterzeile&lt;/li>
&lt;li>Hardwarebeschleunigtes Füllen, Linien ziehen, etc.&lt;/li>
&lt;li>Vertikales Scrollregister&lt;/li>
&lt;/ul>
&lt;p>Der Nachfolger des V9938 wiederum ist der &lt;a href="https://en.wikipedia.org/wiki/Yamaha_V9958">V9958&lt;/a> von 1988. Dieser hat gegenüber dem Vorgänger nur einige kleine Verbesserungen erhalten, und zwar unter anderem:&lt;/p>
&lt;ul>
&lt;li>Horizontales Scrollregister&lt;/li>
&lt;li>Hardwarebeschleunigtes Füllen, Linien ziehen, etc. auch in nicht-bitmap-Modi&lt;/li>
&lt;/ul>
&lt;p>Beide Chips können bis zu 192k DRAM adressieren, und zwar max. 128k Video-RAM + 64k Extended RAM. Es werden DRAMs in den Formaten 16Kx1b, 16Kx4b, 64Kx1b und 64Kx4b unterstützt.&lt;/p>
&lt;p>&lt;img src="images/img_3129-e1512817894665.jpg" alt="img_3129.jpg">&lt;/p>
&lt;p>Unser Testaufbau &amp;ldquo;begnügt&amp;rdquo; sich mit 2x 64Kx4b und damit insgesamt 64Kb Video RAM (der TMS9929 kann nur max. 16K). Verglichen mit dem TMS9929 funktioniert das DRAM-Interface des V9958 selbst auf dem Steckbrett so stabil, dass wir auf irgendwelche SRAM-basierten Lösungen verzichten können. Auch der weitere Aufbau ist eher übersichtlich. Da der V9958 direkt RGB liefert, ist keine aufwendige Aufbereitung des Videosignals nötig. Als Ausgangsstufe wird ein Sony CXA2075M eingesetzt, der nebenher auch S-Video und Composite erzeugt. Damit dürfte sich künftig die Zahl der Steckschwein-geeigneten Fernseher/Monitore drastisch erhöhen.&lt;/p>
&lt;p>Jetzt bleiben noch einige Detailfragen des Businterface zu klären. Wie &lt;a href="http://lc64.blogspot.de/2015/04/v9938-with-rgb-output.html">MrFossi1&lt;/a> schon festgestellt hat, lassen sich Datentransfers ins Videoram nicht mehr in hoher Geschwindigkeit durchführen, während der Videochip im Blank ist oder das Display deaktiviert. Beim TMS9929 war das möglich.&lt;/p>
&lt;p>Der V9958 hingegen verfügt allerdings über einen ominösen /WAIT-Pin, dessen Funktion allerdings erst per Software aktiviert werden muss. Das Datenblatt erwähnt die Wait-Funktion nur kurz als Möglichkeit, Zugriffe aufs VRAM zu beschleunigen, schweigt sich dann aber aus. Hier gilt es zu forschen.&lt;/p></content></item><item><title>TMS9929 Composite Video und RGB+H/Y</title><link>https://beta.steckschwein.de/post/tms9929-composite-video-und-rgbhy/</link><pubDate>Mon, 28 Jul 2014 00:00:00 +0000</pubDate><guid>https://beta.steckschwein.de/post/tms9929-composite-video-und-rgbhy/</guid><description>Damit Dommas nicht langweilig wird und auch in den Gfx-Genuss kommt muss natürlich eine Lösung her. Er hat momentan keine Möglichkeit das Steckschwein mit Grafik an seinem geliebten Commodore 1084-S Monitor zu betreiben. Was ist also zu tun?
Wir haben ja im Post &amp;hellip; beschrieben wie wir aus dem YRyBy des TMS9929 ein brauchbares RGB+Sync (BAS) Signal erzeugen können. Das funktioniert auch wunderbar an allen derzeit gängigen CRT-Fernsehern und auch an allen neuzeitlichen Flat-Screens wenn diese noch einen SCART-Anschluss oder ebend RGB+Sync (PAL-RGB) Eingänge besitzen.</description><content>&lt;p>Damit Dommas nicht langweilig wird und auch in den Gfx-Genuss kommt muss natürlich eine Lösung her. Er hat momentan keine Möglichkeit das Steckschwein mit Grafik an seinem geliebten Commodore 1084-S Monitor zu betreiben. Was ist also zu tun?&lt;/p>
&lt;p>Wir haben ja im Post &amp;hellip; beschrieben wie wir aus dem YRyBy des TMS9929 ein brauchbares RGB+Sync (BAS) Signal erzeugen können. Das funktioniert auch wunderbar an allen derzeit gängigen CRT-Fernsehern und auch an allen neuzeitlichen Flat-Screens wenn diese noch einen SCART-Anschluss oder ebend RGB+Sync (PAL-RGB) Eingänge besitzen. Am 1084-S geht aber nur RGB+H/V, d.h. das horizontale und vertikale Sync-Signal muss getrennt vorliegen. Wir haben aber nur ein Composite-Sync mit dem RGB+S vorliegen. Wir brauchen einen Sync-Separator. Genau das macht der LM1881 und kompatible.&lt;/p>
&lt;p> &lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>&lt;strong>Problem&lt;/strong>: &lt;strong>Die Schaltung funktioniert nicht, zumindest nicht am Monitor 1084S&lt;/strong>&lt;/p>
&lt;p>Damit gehts also nicht, das erzeugte SYNC taugt dem 1084S nicht, wir bekommen kein Bild, sondern nur geflimmer.&lt;/p>
&lt;p>Den 1084S nochmal genau angeschaut, um dann festzustellen, dass der ja eigentlich auch nur ein Fernseher ist. Mit dem Eingang CVBS/L und dem Umschalter am Front-Panel CVBS/RGB lässt sich der 1084S mit dem analogen RGB-Signal über die DIN-Buchse und zusätlzich dem SYNC-Signal am CVBS/L betreiben. Wir machen einen Test und es funktioniert, wir bekommen ein super Bild.&lt;/p>
&lt;p>Da wir jetzt aber ein völlig unkonventionelles Kabel benutzen, wir aber als Ziel einen 1-Platinenrechner haben der kompatibel zum Rest der Welt sein soll, entschließen wir uns noch die fehlende SCART-Buchse am 1084S nazurüsten. Dazu muss lediglich eine entsprechende SCART-Buchse eingebaut werden und die RGB-Pins am &lt;a href="http://de.wikipedia.org/wiki/SCART">SCART&lt;/a> - Pin 7 (blau), Pin 11 (grün), Pin 15 (rot) - mit dem bereits vorhandenen RGB-Anschlüssen der RGB DIN-Buchse des 1084S verbinden. Zum Glück ist dies nicht erforderlich, denn auch bei der 1084S Baureihe ohne SCART-Buchse ist dies bereits vorgesehen. Wir müssen uns lediglich Gedanken um das (F)BAS/Video-SYNC machen, was an Pin 20 der SCART-Buchse anliegt. Das SYNC muss im 1084S, wie oben bereits erwähnt, mit dem CVBS/L Cinch-Eingang verbunden werden.&lt;/p>
&lt;p>Im folgenden Schaltplan eines 1084S Models mit SCART-Buchse kann man diesen Signalpfad deutlich erkennen.&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>Wie auch immer, in unseren 1084S ohne SCART-Buchse ist dieser Pfad nicht verbunden. Dazu kommt das Problem, dass der Schalter CVBS/RGB im Front-Panel lediglich CVBS am Cinch-Eingang oder ebend RGB über die DIN-Buchse zulässt.&lt;/p>
&lt;p>Schaltet man auf RGB wird über den Transistor TS509 der Video-Eingang über Cinch kurzgeschlossen, den es soll ja das H-/V-Sync der DIN-Buchse verwendet werden, was mit dem LM1881 und oben beschriebenen Ansatz nicht funktioniert hat.&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>Also ziehen wir die Basis des TS509 kurzerhand auf Masse, so dass quasi der CVBS/RGB Schalter das Video-Signal nicht mehr kurzschließen kann und wir unser SYNC via Cinch oder ebend jetzt über SCART zusammen mit dem RGB am SCART in den 1084S speisen können.&lt;/p>
&lt;p>Wir schrauben den 1084S wieder zusammen und sind zufrieden, immerhin haben wir jetzt ein Super Bild und einen SCART-Anschluss für den 1084S.&lt;/p>
&lt;p>&lt;a href="https://steckschwein.files.wordpress.com/2014/07/d39ce-1084s_scart_rgb.jpeg">&lt;img src="images/d39ce-1084s_scart_rgb.jpeg" alt="">&lt;/a>&lt;/p></content></item></channel></rss>