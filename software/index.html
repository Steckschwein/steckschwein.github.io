<!doctype html><html class=no-js lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Software - Steckschwein</title>
<script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><meta property="og:url" content="https://www.steckschwein.de/software/"><meta property="og:site_name" content="Steckschwein"><meta property="og:title" content="Software"><meta property="og:description" content="BIOS At initial boot time, the ROM bank containing the BIOS is banked in. The BIOS initializes the hardware, such as the UART and the video chip, and tries to load the steckOS loader executable (usually LOADER.PRG) from SD card and executes it. If that fails, the BIOS expects a PRG binary uploaded via XMODEM. UART baud rate and the name of the steckOS loader executable can be configured and are stored in the RTCâ€™s NVRAM."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta itemprop=name content="Software"><meta itemprop=description content="BIOS At initial boot time, the ROM bank containing the BIOS is banked in. The BIOS initializes the hardware, such as the UART and the video chip, and tries to load the steckOS loader executable (usually LOADER.PRG) from SD card and executes it. If that fails, the BIOS expects a PRG binary uploaded via XMODEM. UART baud rate and the name of the steckOS loader executable can be configured and are stored in the RTC&rsquo;s NVRAM."><meta itemprop=wordCount content="896"><meta itemprop=keywords content="Software"><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=dns-prefetch href=//fonts.googleapis.com><link rel=dns-prefetch href=//fonts.gstatic.com><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title=Steckschwein rel=home><div class="logo__item logo__text"><div class=logo__title>Steckschwein</div><div class=logo__tagline>An 8bit computer for the 21st century</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/about/><span class=menu__text>About</span></a></li><li class=menu__item><a class=menu__link href=/><span class=menu__text>Blog</span></a></li><li class=menu__item><a class=menu__link href=/hardware/><span class=menu__text>Hardware</span></a></li><li class=menu__item><a class=menu__link href=/software/><span class=menu__text>Software</span></a></li><li class=menu__item><a class=menu__link href=/resources/><span class=menu__text>Resources</span></a></li><li class=menu__item><a class=menu__link href=/impressum/><span class=menu__text>Impressum</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>Software</h1><div class="post__meta meta"><div class="meta__item-categories meta__item"><svg class="meta__icon icon icon-category" width="16" height="16" viewBox="0 0 16 16"><path d="m7 2 1 2h8v11H0V2z"/></svg><span class=meta__text><a class=meta__link href=/categories/software/ rel=category>Software</a></span></div></div></header><div class="content post__content clearfix"><h1 id=bios>BIOS</h1><p><img alt="bios startup message" src=/images/bios.png></p><p>At initial boot time, the ROM bank containing the BIOS is banked in. The BIOS initializes the hardware, such as the UART and the video chip, and tries to load the steckOS loader executable (usually LOADER.PRG) from SD card and executes it. If that fails, the BIOS expects a PRG binary uploaded via XMODEM.
UART baud rate and the name of the steckOS loader executable can be configured and are stored in the RTC&rsquo;s NVRAM.</p><h1 id=steckos>steckOS</h1><p><img alt="steckOS right after boot" src=/images/steckOS.png></p><p>The operating system loader (LOADER.PRG) contains the actual steckOS kernel, and the startup code that loads the OS and starts up the kernel. The OS loader as well as any executable in steckOS are in PRG format with the load address in the first two bytes as known from Commodore computers.</p><h2 id=kernel>kernel</h2><p>After having been loaded by the OS loader, the kernel initializes the hardware (again), mounts the SD card and tries to find the shell executable, which it then executes.
The steckOS kernel provides basic interrupt handling, text display routines for the VDP and a <a href=/jumptable/>jumptable</a> with kernel calls.</p><h2 id=library>library</h2><p>Most driver code (VDP, FAT32) is located in the library, so that BIOS and kernel can share the same code. Library calls are documented <a href=/libsrc/>here</a></p><h2 id=shell>shell</h2><p>The steckShell is the user interface of steckOS, very much like COMMAND.COM on DOS or sh/bash on Linux. steckOS&rsquo;s primary purpose is to be able to navigate the file system and start programs.
For that, steckShell provides a couple of internal and external commands. External meanins that those are separate PRG files which are loaded from the file system and executed as any other program.</p><p>For example, on typing &ldquo;fsinfo&rdquo; followed by enter the sheckShell will first search it&rsquo;s internal command table, will not find an entry &ldquo;fsinfo&rdquo; there and will then search a list of directories (the PATH) for an executable named FSINFO.PRG, and execute it if found.</p><h3 id=internal-commands>internal commands</h3><p>The following commands are internally built into the shell executable.</p><h4 id=ls-dir>ls, dir</h4><p><img alt="steckOS ls command output" src=/images/ls.png></p><p>Displays directory contents, like a mix of the DOS &ldquo;dir&rdquo; command and the &ldquo;ls&rdquo; command in Unix/Linux. The &ldquo;dir&rdquo; command is an alias for &ldquo;ls -l&rdquo;.</p><h4 id=pwd-mkdir-rmdir-rm-cls>pwd, mkdir, rmdir, rm, cls</h4><p><img alt="steckOS pwd, mkdir, rmdir, rm command output" src=/images/pwd_mkdir_rmdir_rm.png></p><p>These commands do pretty much what you think they do.</p><h4 id=up>up</h4><p><img alt="steckOS up command output" src=/images/up.png></p><p>up jumps to the kernel xmodem upload routine which expects an executable in PRG format to be sent via xmodem.</p><h4 id=pd>pd</h4><p><img alt="steckOS pd command output" src=/images/pd.png></p><p>pd (page dump) shows a memory page (256 bytes) or a range of memory pages in hexdump format.</p><h4 id=ms>ms</h4><p><img alt="steckOS ms command output" src=/images/ms.png></p><p>ms (memory set) sets the content of a memory address plus the following bytes</p><h4 id=go>go</h4><p><img alt="steckOS go command output" src=/images/go.png></p><p>go starts executing code at the given memory location</p><h4 id=load>load</h4><p><img alt="steckOS load command output" src=/images/load.png></p><p>load the contents of a file to a given memory location</p><h4 id=save>save</h4><p><img alt="steckOS save command output" src=/images/save.png></p><p>save a memory area (from address, to address) to a file</p><h4 id=bd>bd</h4><p><img alt="steckOS bd command output" src=/images/bd.png></p><p>bd (block dump) loads a block (512 bytes) from SD card and displays it&rsquo;s contents like pd</p><h3 id=external-commands-and-tools>external commands and tools</h3><p>Every other command is searched for in a hard coded &ldquo;PATH&rdquo; and executed. Commands and tools are mostly named after their Unix / DOS counterparts.</p><h4 id=help>help</h4><p><img alt="steckOS right after boot" src=/images/help.png></p><p>The &ldquo;help&rdquo;-command lists the most important commands.</p><h4 id=stat>stat</h4><p><img alt="steckOS stat command output" src=/images/stat.png></p><p>Much like the Unix/Linux stat command, stat shows meta information about a file or directory, including file attributes.</p><h4 id=attrib>attrib</h4><p><img alt="steckOS attrib command example" src=/images/attrib.png></p><p>Much like it&rsquo;s DOS counterpart, attrib is used to set/unset certain FAT attributes such as the hidden bit.</p><h4 id=fsinfo>fsinfo</h4><p><img alt="steckOS fsinfo command output" src=/images/fsinfo.png></p><p>fsinfo lists some information about the currently mounted FAT32 file system.</p><h4 id=nvram>nvram</h4><p><img alt="steckOS nvram command output" src=/images/nvram.png></p><p>nvram shows and/or modifies the contents of the RTCs NVRAM. The NVRAM is used to store the OS loader filename, UART settings like baud rate and line parameters, and the keyboard delay and repeat rate.</p><h4 id=date-and-setdate>date and setdate</h4><p><img alt="steckOS nvram command output" src=/images/date_setdate.png></p><p>date and setdate are used to display or set the RTC time.</p><h4 id=banner>banner</h4><p><img alt="steckOS banner command output" src=/images/banner.png></p><p>A version of the Unix SYS V banner command taken from <a href=https://github.com/uffejakobsen/sysvbanner/blob/master/banner.c>here</a>. One of the few tools written in C. The source compiled with cc65 without modifications. We changed some int variables to unsigned char anyway to fit our 8bit CPU.</p><h4 id=wozmon>wozmon</h4><p><img alt="steckOS wozmon showing the memory mapping registers" src=/images/wozmon.png></p><p>Steve Wozniak&rsquo;s legendary memory monitor fitting in one page (256 bytes). The effort of adapting it to steckOS is documented in <a href=/post/wozmon-a-memory-monitor-in-256-bytes/>this blog post</a></p><h2 id=programming-languages>Programming languages</h2><p>An 8bit computer is nothing without period correct interpreter languages like BASIC and Forth.</p><h3 id=ehbasic>EhBasic</h3><p><img alt=ehbasic src=/images/ehbasic.png></p><p>EhBasic is a quite common BASIC interpreter among homebrew enthusiasts because of it&rsquo;s easy portability. Our version is based on the <a href="http://forum.6502.org/viewtopic.php?f=5&t=5760">65c02 version by forum.6502.org user floobydust</a>. We extended it with a few graphics commands that interface with the V9958&rsquo;s command engine and implemented the <a href=/post/ascii_ehbasic/>LOAD</a> and the <a href=/post/ascii_save_ehbasic/>SAVE</a> command to load and save the BASIC program as ASCII source instead of binary.</p><h3 id=taliforth2>TaliForth2</h3><p><img alt="tali forth" src=/images/taliforth.png></p><p><a href=https://github.com/scotws/TaliForth2>TaliForth 2</a> is a subroutine threaded code (STC) implementation of an ANS-based Forth for the 65c02 written by Scot W. Stevenson.</p><h2 id=games>Games</h2><p>A computer is nothing without games, so we had to write/port a few.</p><h3 id=dinosaur>dinosaur</h3><p><img alt=dinosaur src=/images/dinosaur.png></p><p>An endless runner, just like the one built-in into the Chrome browser.</p><h3 id=pong>pong</h3><p><img alt=pong src=/images/pong.png></p><p>Our pong clone uses the TMS9918&rsquo;s multicolor mode with 64x48 pixels. Yes, those squares are single pixels.</p><h3 id=microchess>MicroChess</h3><p><img alt=microchess src=/images/microchess.png></p><p>MicroChess is a chess game, written in 1976 for the MOS/Commodore KIM-1 by Peter Jennings, making the KIM-1 the first affordable chess computer. Our version is based on the <a href=http://6502.org/source/games/uchess/uchess.htm>serial line version by Daryl Rictor</a> which includes display of a chess board.</p><h2 id=other-neat-stuff>Other neat stuff</h2><h3 id=unrclock>unrclock</h3><p><img alt=unrclock src=/images/unrclock.png></p><p>An unary clock, nice to look at, useful as screen saver, and like pong another showcase for the 64x48 pixel multicolor mode.</p></div></article></main></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2024 Steckschwein.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>