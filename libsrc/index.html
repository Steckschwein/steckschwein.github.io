<!doctype html><html class=no-js lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=X-UA-Compatible content="IE=edge"><title>- Steckschwein</title>
<script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><meta property="og:title" content><meta property="og:description" content="Modules fat32 | joystick | keyboard | sdcard | spi | uart | util | vdp |
fat32 fat_chdir | fat_close | fat_find_first | fat_find_next | fat_fopen | fat_fread_byte | fat_get_root_and_pwd | fat_mkdir | fat_mount | fat_opendir | fat_readdir | fat_rmdir | fat_unlink | fat_write_byte |
fat_chdir change current directoryreaddir expects a pointer in A/Y to store the next F32DirEntry structure representing the next FAT32 directory entry in the directory stream pointed of directory X."><meta property="og:type" content="article"><meta property="og:url" content="https://www.steckschwein.de/libsrc/"><meta property="article:section" content><meta itemprop=name content><meta itemprop=description content="Modules fat32 | joystick | keyboard | sdcard | spi | uart | util | vdp |
fat32 fat_chdir | fat_close | fat_find_first | fat_find_next | fat_fopen | fat_fread_byte | fat_get_root_and_pwd | fat_mkdir | fat_mount | fat_opendir | fat_readdir | fat_rmdir | fat_unlink | fat_write_byte |
fat_chdir change current directoryreaddir expects a pointer in A/Y to store the next F32DirEntry structure representing the next FAT32 directory entry in the directory stream pointed of directory X."><meta itemprop=wordCount content="1760"><meta itemprop=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content><meta name=twitter:description content="Modules fat32 | joystick | keyboard | sdcard | spi | uart | util | vdp |
fat32 fat_chdir | fat_close | fat_find_first | fat_find_next | fat_fopen | fat_fread_byte | fat_get_root_and_pwd | fat_mkdir | fat_mount | fat_opendir | fat_readdir | fat_rmdir | fat_unlink | fat_write_byte |
fat_chdir change current directoryreaddir expects a pointer in A/Y to store the next F32DirEntry structure representing the next FAT32 directory entry in the directory stream pointed of directory X."><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=dns-prefetch href=//fonts.googleapis.com><link rel=dns-prefetch href=//fonts.gstatic.com><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title=Steckschwein rel=home><div class="logo__item logo__text"><div class=logo__title>Steckschwein</div><div class=logo__tagline>An 8bit computer for the 21st century</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/about/><span class=menu__text>About</span></a></li><li class=menu__item><a class=menu__link href=/><span class=menu__text>Blog</span></a></li><li class=menu__item><a class=menu__link href=/hardware/><span class=menu__text>Hardware</span></a></li><li class=menu__item><a class=menu__link href=/software/><span class=menu__text>Software</span></a></li><li class=menu__item><a class=menu__link href=/resources/><span class=menu__text>Resources</span></a></li><li class=menu__item><a class=menu__link href=/impressum/><span class=menu__text>Impressum</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title></h1></header><div class="content post__content clearfix"><h1 id=modules>Modules</h1><p><a href=/#fat32>fat32</a> | <a href=/#joystick>joystick</a> | <a href=/#keyboard>keyboard</a> | <a href=/#sdcard>sdcard</a> | <a href=/#spi>spi</a> | <a href=/#uart>uart</a> | <a href=/#util>util</a> | <a href=/#vdp>vdp</a> |</p><hr><h2 id=fat32>fat32</h2><p><a href=/#fat_chdir>fat_chdir</a> | <a href=/#fat_close>fat_close</a> | <a href=/#fat_find_first>fat_find_first</a> | <a href=/#fat_find_next>fat_find_next</a> | <a href=/#fat_fopen>fat_fopen</a> | <a href=/#fat_fread_byte>fat_fread_byte</a> | <a href=/#fat_get_root_and_pwd>fat_get_root_and_pwd</a> | <a href=/#fat_mkdir>fat_mkdir</a> | <a href=/#fat_mount>fat_mount</a> | <a href=/#fat_opendir>fat_opendir</a> | <a href=/#fat_readdir>fat_readdir</a> | <a href=/#fat_rmdir>fat_rmdir</a> | <a href=/#fat_unlink>fat_unlink</a> | <a href=/#fat_write_byte>fat_write_byte</a> |</p><hr><h3 id=a-namefat_chdir-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrcfat32fat32_dirsl83fat_chdira><a name=fat_chdir target=_blank href=https://github.com/Steckschwein/code/tree/master/steckos/libsrc/fat32/fat32_dir.s#L83>fat_chdir</a></h3><blockquote><p>change current directoryreaddir expects a pointer in A/Y to store the next F32DirEntry structure representing the next FAT32 directory entry in the directory stream pointed of directory X.</p></blockquote><dl><dt>In</dt><dd>A, low byte of pointer to zero terminated string with the file path<br>X, high byte of pointer to zero terminated string with the file path</dd><dt>Out</dt><dd>C, C=0 on success (A=0), C=1 and A=<error code> otherwise<br>X, index into fd_area of the opened directory (which is FD_INDEX_CURRENT_DIR)</dd></dl><hr><h3 id=a-namefat_close-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrcfat32fat32sl290fat_closea><a name=fat_close target=_blank href=https://github.com/Steckschwein/code/tree/master/steckos/libsrc/fat32/fat32.s#L290>fat_close</a></h3><blockquote><p>close file, update dir entry and free file descriptor quietly</p></blockquote><dl><dt>In</dt><dd>X, index into fd_area of the opened file</dd><dt>Out</dt><dd>C, 0 on success, 1 on error<br>A, error code</dd></dl><hr><h3 id=a-namefat_find_first-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrcfat32fat32sl309fat_find_firsta><a name=fat_find_first target=_blank href=https://github.com/Steckschwein/code/tree/master/steckos/libsrc/fat32/fat32.s#L309>fat_find_first</a></h3><blockquote><p>find first dir entry</p></blockquote><dl><dt>In</dt><dd>A, low byte of pointer to zero terminated string with the file path<br>Y, high byte of pointer to zero terminated string with the file path<br>X, file descriptor (index into fd_area) of the directory</dd><dt>Out</dt><dd>Z, 1 on success, 0 on error<br>A, error code<br>C, 0 if found and dirptr is set to the dir entry found (requires Z=1), else 1</dd></dl><hr><h3 id=a-namefat_find_next-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrcfat32fat32sl323fat_find_nexta><a name=fat_find_next target=_blank href=https://github.com/Steckschwein/code/tree/master/steckos/libsrc/fat32/fat32.s#L323>fat_find_next</a></h3><blockquote><p>find next dir entry</p></blockquote><dl><dt>In</dt><dd>X, file descriptor (index into fd_area) of the directory</dd><dt>Out</dt><dd>A, error code<br>C, 0 on success (A=0), C=1 and A=<error code>, else 1</dd></dl><hr><h3 id=a-namefat_fopen-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrcfat32fat32sl243fat_fopena><a name=fat_fopen target=_blank href=https://github.com/Steckschwein/code/tree/master/steckos/libsrc/fat32/fat32.s#L243>fat_fopen</a></h3><blockquote><p>open file</p></blockquote><dl><dt>In</dt><dd>A, low byte of pointer to zero terminated string with the file path<br>X, high byte of pointer to zero terminated string with the file path<br>Y, file mode constants O_RDONLY = $01, O_WRONLY = $02, O_RDWR = $03, O_CREAT = $10, O_TRUNC = $20, O_APPEND = $40, O_EXCL = $80</dd><dt>Out</dt><dd>C, 0 on success, 1 on error<br>A, error code<br>X, index into fd_area of the opened file</dd></dl><hr><h3 id=a-namefat_fread_byte-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrcfat32fat32sl168fat_fread_bytea><a name=fat_fread_byte target=_blank href=https://github.com/Steckschwein/code/tree/master/steckos/libsrc/fat32/fat32.s#L168>fat_fread_byte</a></h3><blockquote><p>read byte from file</p></blockquote><dl><dt>In</dt><dd>X, offset into fs area</dd><dt>Out</dt><dd>C, 0 on success, 1 on error<br>A, received byte</dd></dl><hr><h3 id=a-namefat_get_root_and_pwd-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrcfat32fat32_cwdsl47fat_get_root_and_pwda><a name=fat_get_root_and_pwd target=_blank href=https://github.com/Steckschwein/code/tree/master/steckos/libsrc/fat32/fat32_cwd.s#L47>fat_get_root_and_pwd</a></h3><blockquote><p>get current directory</p></blockquote><dl><dt>In</dt><dd>A, low byte of address to write the current work directory string into<br>Y, high byte address to write the current work directory string into<br>X, size of result buffer pointet to by A/X</dd><dt>Out</dt><dd>C, 0 on success, 1 on error<br>A, error code</dd></dl><hr><h3 id=a-namefat_mkdir-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrcfat32fat32_write_dirsl74fat_mkdira><a name=fat_mkdir target=_blank href=https://github.com/Steckschwein/code/tree/master/steckos/libsrc/fat32/fat32_write_dir.s#L74>fat_mkdir</a></h3><blockquote><p>create directory denoted by given path in A/X</p></blockquote><dl><dt>In</dt><dd>A, low byte of pointer to directory string<br>X, high byte of pointer to directory string</dd><dt>Out</dt><dd>C, 0 on success, 1 on error<br>A, error code</dd></dl><hr><h3 id=a-namefat_mount-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrcfat32fat32_mountsl47fat_mounta><a name=fat_mount target=_blank href=https://github.com/Steckschwein/code/tree/master/steckos/libsrc/fat32/fat32_mount.s#L47>fat_mount</a></h3><blockquote><p>mount fat32 file system</p></blockquote><dl><dt>Out</dt><dd>C, 0 on success, 1 on error<br>A, error code</dd></dl><hr><h3 id=a-namefat_opendir-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrcfat32fat32_dirsl60fat_opendira><a name=fat_opendir target=_blank href=https://github.com/Steckschwein/code/tree/master/steckos/libsrc/fat32/fat32_dir.s#L60>fat_opendir</a></h3><blockquote><p>open directory by given path starting from directory given as file descriptor</p></blockquote><dl><dt>In</dt><dd>A, low byte of pointer to zero terminated string with the file path<br>X, high byte of pointer to zero terminated string with the file path</dd><dt>Out</dt><dd>C, C=0 on success (A=0), C=1 and A=<error code> otherwise<br>X, index into fd_area of the opened directory</dd></dl><hr><h3 id=a-namefat_readdir-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrcfat32fat32_dirsl102fat_readdira><a name=fat_readdir target=_blank href=https://github.com/Steckschwein/code/tree/master/steckos/libsrc/fat32/fat32_dir.s#L102>fat_readdir</a></h3><blockquote></blockquote><dl><dt>In</dt><dd>X - file descriptor to fd_area of the directory<br>A/Y - pointer to target buffer which must be .sizeof(F32DirEntry)</dd><dt>Out</dt><dd>C - C = 0 on success (A=0), C = 1 and A = <error code>otherwise</dd></dl><hr><h3 id=a-namefat_rmdir-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrcfat32fat32_write_dirsl48fat_rmdira><a name=fat_rmdir target=_blank href=https://github.com/Steckschwein/code/tree/master/steckos/libsrc/fat32/fat32_write_dir.s#L48>fat_rmdir</a></h3><blockquote><p>delete a directory entry denoted by given path in A/X</p></blockquote><dl><dt>In</dt><dd>A, low byte of pointer to directory string<br>X, high byte of pointer to directory string</dd><dt>Out</dt><dd>C, 0 on success, 1 on error<br>A, error code</dd></dl><hr><h3 id=a-namefat_unlink-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrcfat32fat32_writesl559fat_unlinka><a name=fat_unlink target=_blank href=https://github.com/Steckschwein/code/tree/master/steckos/libsrc/fat32/fat32_write.s#L559>fat_unlink</a></h3><blockquote><p>unlink (delete) a file denoted by given path in A/X</p></blockquote><dl><dt>In</dt><dd>A, low byte of pointer to zero terminated string with the file path<br>X, high byte of pointer to zero terminated string with the file path</dd><dt>Out</dt><dd>C, C=0 on success (A=0), C=1 and A=<error code> otherwise</dd></dl><hr><h3 id=a-namefat_write_byte-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrcfat32fat32_writesl56fat_write_bytea><a name=fat_write_byte target=_blank href=https://github.com/Steckschwein/code/tree/master/steckos/libsrc/fat32/fat32_write.s#L56>fat_write_byte</a></h3><blockquote><p>write byte to file</p></blockquote><dl><dt>In</dt><dd>A, byte to write<br>X, offset into fs area</dd><dt>Out</dt><dd>C, 0 on success, 1 on error</dd></dl><hr><h2 id=joystick>joystick</h2><p><a href=/#joystick_detect>joystick_detect</a> | <a href=/#joystick_read>joystick_read</a> |</p><hr><h3 id=a-namejoystick_detect-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrcjoystickjoysticksl45joystick_detecta><a name=joystick_detect target=_blank href=https://github.com/Steckschwein/code/tree/master/steckos/libsrc/joystick/joystick.s#L45>joystick_detect</a></h3><blockquote><p>detect joystick</p></blockquote><dl><dt>Out</dt><dd>Z, Z=1 no joystick detected, Z=0 joystick detected, port in A<br>A, detected joystick port, JOY_PORT1 or JOY_PORT2</dd></dl><hr><h3 id=a-namejoystick_read-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrcjoystickjoysticksl17joystick_reada><a name=joystick_read target=_blank href=https://github.com/Steckschwein/code/tree/master/steckos/libsrc/joystick/joystick.s#L17>joystick_read</a></h3><blockquote><p>read state of specified joystick</p></blockquote><dl><dt>Out</dt><dd>A, joystick button state - bit 0-4</dd></dl><hr><h2 id=keyboard>keyboard</h2><p><a href=/#fetchkey>fetchkey</a> | <a href=/#getkey>getkey</a> |</p><hr><h3 id=a-namefetchkey-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrckeyboardkeyboardsl40fetchkeya><a name=fetchkey target=_blank href=https://github.com/Steckschwein/code/tree/master/steckos/libsrc/keyboard/keyboard.s#L40>fetchkey</a></h3><blockquote><p>fetch byte from keyboard controller</p></blockquote><dl><dt>Out</dt><dd>A, fetched key / error code<br>C, 1 - key was fetched, 0 - nothing fetched</dd></dl><hr><h3 id=a-namegetkey-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrckeyboardkeyboardsl66getkeya><a name=getkey target=_blank href=https://github.com/Steckschwein/code/tree/master/steckos/libsrc/keyboard/keyboard.s#L66>getkey</a></h3><blockquote><p>get byte from keyboard buffer</p></blockquote><dl><dt>Out</dt><dd>A, fetched key<br>C, 1 - key was fetched, 0 - nothing fetched</dd></dl><hr><h2 id=sdcard>sdcard</h2><p><a href=/#sd_busy_wait>sd_busy_wait</a> | <a href=/#sd_cmd>sd_cmd</a> | <a href=/#sd_deselect_card>sd_deselect_card</a> | <a href=/#sd_read_block>sd_read_block</a> | <a href=/#sd_select_card>sd_select_card</a> | <a href=/#sdcard_init>sdcard_init</a> |</p><hr><h3 id=a-namesd_busy_wait-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrcsdcardsdcardsl423sd_busy_waita><a name=sd_busy_wait target=_blank href=https://github.com/Steckschwein/code/tree/master/steckos/libsrc/sdcard/sdcard.s#L423>sd_busy_wait</a></h3><blockquote><p>wait while sd card is busy</p></blockquote><dl><dt>Out</dt><dd>C, C = 0 on success, C = 1 on error (timeout)</dd><dt>Clobbers</dt><dd>A,X,Y</dd></dl><hr><h3 id=a-namesd_cmd-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrcsdcardsdcardsl235sd_cmda><a name=sd_cmd target=_blank href=https://github.com/Steckschwein/code/tree/master/steckos/libsrc/sdcard/sdcard.s#L235>sd_cmd</a></h3><blockquote><p>send command to sd card</p></blockquote><dl><dt>In</dt><dd>A, command byte<br>sd_cmd_param, command parameters</dd><dt>Out</dt><dd>A, SD Card R1 status byte</dd><dt>Clobbers</dt><dd>A,X,Y</dd></dl><hr><h3 id=a-namesd_deselect_card-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrcsdcardsdcardsl324sd_deselect_carda><a name=sd_deselect_card target=_blank href=https://github.com/Steckschwein/code/tree/master/steckos/libsrc/sdcard/sdcard.s#L324>sd_deselect_card</a></h3><blockquote><p>Read block from SD Card</p></blockquote><dl><dt>Out</dt><dd>A, error code<br>C, 0 - success, 1 - error</dd><dt>Clobbers</dt><dd>X</dd></dl><hr><h3 id=a-namesd_read_block-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrcsdcardsdcardsl295sd_read_blocka><a name=sd_read_block target=_blank href=https://github.com/Steckschwein/code/tree/master/steckos/libsrc/sdcard/sdcard.s#L295>sd_read_block</a></h3><blockquote><p>Read block from SD Card</p></blockquote><dl><dt>In</dt><dd>lba_addr, LBA address of block<br>sd_blkptr, target adress for the block data to be read</dd><dt>Out</dt><dd>A, error code<br>C, 0 - success, 1 - error</dd><dt>Clobbers</dt><dd>A,X,Y</dd></dl><hr><h3 id=a-namesd_select_card-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrcsdcardsdcardsl409sd_select_carda><a name=sd_select_card target=_blank href=https://github.com/Steckschwein/code/tree/master/steckos/libsrc/sdcard/sdcard.s#L409>sd_select_card</a></h3><blockquote><p>select sd card, pull CS line to low with busy wait</p></blockquote><dl><dt>Out</dt><dd>C, C = 0 on success, C = 1 on error (timeout)</dd><dt>Clobbers</dt><dd>A,X,Y</dd></dl><hr><h3 id=a-namesdcard_init-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrcsdcardsdcardsl65sdcard_inita><a name=sdcard_init target=_blank href=https://github.com/Steckschwein/code/tree/master/steckos/libsrc/sdcard/sdcard.s#L65>sdcard_init</a></h3><blockquote><p>initialize sd card in SPI mode</p></blockquote><dl><dt>Out</dt><dd>Z,1 on success, 0 on error<br>A, error code</dd><dt>Clobbers</dt><dd>A,X,Y</dd></dl><hr><h2 id=spi>spi</h2><p><a href=/#spi_r_byte>spi_r_byte</a> | <a href=/#spi_rw_byte>spi_rw_byte</a> |</p><hr><h3 id=a-namespi_r_byte-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrcspispi_r_bytesl38spi_r_bytea><a name=spi_r_byte target=_blank href=https://github.com/Steckschwein/code/tree/master/steckos/libsrc/spi/spi_r_byte.s#L38>spi_r_byte</a></h3><blockquote><p>read byte via SPI</p></blockquote><dl><dt>Out</dt><dd>A, received byte</dd><dt>Clobbers</dt><dd>A,X</dd></dl><hr><h3 id=a-namespi_rw_byte-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrcspispi_rw_bytesl40spi_rw_bytea><a name=spi_rw_byte target=_blank href=https://github.com/Steckschwein/code/tree/master/steckos/libsrc/spi/spi_rw_byte.s#L40>spi_rw_byte</a></h3><blockquote><p>transmit byte via SPI</p></blockquote><dl><dt>In</dt><dd>A, byte to transmit</dd><dt>Out</dt><dd>A, received byte</dd><dt>Clobbers</dt><dd>A,X,Y</dd></dl><hr><h2 id=uart>uart</h2><p><a href=/#uart_init>uart_init</a> | <a href=/#uart_rx>uart_rx</a> | <a href=/#uart_rx_nowait>uart_rx_nowait</a> | <a href=/#uart_tx>uart_tx</a> |</p><hr><h3 id=a-nameuart_init-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrcuart16550uart_initsl11uart_inita><a name=uart_init target=_blank href=https://github.com/Steckschwein/code/tree/master/steckos/libsrc/uart/16550/uart_init.s#L11>uart_init</a></h3><blockquote><p>initialize UART with parameters from nvram</p></blockquote><dl><dt>Clobbers</dt><dd>A,X,Y</dd></dl><hr><h3 id=a-nameuart_rx-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrcuart16550uart_rxsl9uart_rxa><a name=uart_rx target=_blank href=https://github.com/Steckschwein/code/tree/master/steckos/libsrc/uart/16550/uart_rx.s#L9>uart_rx</a></h3><blockquote><p>receive byte</p></blockquote><dl><dt>Out</dt><dd>A, received byte</dd></dl><hr><h3 id=a-nameuart_rx_nowait-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrcuart16550uart_rx_nowaitsl7uart_rx_nowaita><a name=uart_rx_nowait target=_blank href=https://github.com/Steckschwein/code/tree/master/steckos/libsrc/uart/16550/uart_rx_nowait.s#L7>uart_rx_nowait</a></h3><blockquote><p>receive byte, no wait</p></blockquote><dl><dt>Out</dt><dd>A, received byte<br>C, 0 - no byte received, 1 - received byte</dd></dl><hr><h3 id=a-nameuart_tx-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrcuart16550uart_txsl10uart_txa><a name=uart_tx target=_blank href=https://github.com/Steckschwein/code/tree/master/steckos/libsrc/uart/16550/uart_tx.s#L10>uart_tx</a></h3><blockquote><p>send byte</p></blockquote><dl><dt>In</dt><dd>A, byte to send</dd></dl><hr><h2 id=util>util</h2><p><a href=/#atoi>atoi</a> | <a href=/#b2ad>b2ad</a> | <a href=/#b2ad2>b2ad2</a> | <a href=/#bin2dual>bin2dual</a> | <a href=/#hexout>hexout</a> | <a href=/#hextodec>hextodec</a> | <a href=/#strout>strout</a> |</p><hr><h3 id=a-nameatoi-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrcutilatoisl31atoia><a name=atoi target=_blank href=https://github.com/Steckschwein/code/tree/master/steckos/libsrc/util/atoi.s#L31>atoi</a></h3><blockquote><p>convert ascii digit to binary</p></blockquote><dl><dt>In</dt><dd>A, value to convert</dd><dt>Out</dt><dd>A, binary number</dd></dl><hr><h3 id=a-nameb2ad-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrcutilb2adsl7b2ada><a name=b2ad target=_blank href=https://github.com/Steckschwein/code/tree/master/steckos/libsrc/util/b2ad.s#L7>b2ad</a></h3><blockquote><p>output 8bit value as 2 digit decimal</p></blockquote><dl><dt>In</dt><dd>A, value to output</dd></dl><hr><h3 id=a-nameb2ad2-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrcutilb2ad2sl8b2ad2a><a name=b2ad2 target=_blank href=https://github.com/Steckschwein/code/tree/master/steckos/libsrc/util/b2ad2.s#L8>b2ad2</a></h3><blockquote><p>output 8bit value as 3 digit decimal</p></blockquote><dl><dt>In</dt><dd>A, value to output</dd></dl><hr><h3 id=a-namebin2dual-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrcutilbin2dualsl6bin2duala><a name=bin2dual target=_blank href=https://github.com/Steckschwein/code/tree/master/steckos/libsrc/util/bin2dual.s#L6>bin2dual</a></h3><blockquote><p>output 8bit value as binary string</p></blockquote><dl><dt>In</dt><dd>A, value to output</dd></dl><hr><h3 id=a-namehexout-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrcutilhexoutsl40hexouta><a name=hexout target=_blank href=https://github.com/Steckschwein/code/tree/master/steckos/libsrc/util/hexout.s#L40>hexout</a></h3><blockquote><p>output 8bit value as hex</p></blockquote><dl><dt>In</dt><dd>A, value to convert</dd></dl><hr><h3 id=a-namehextodec-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrcutilhex2decsl5hextodeca><a name=hextodec target=_blank href=https://github.com/Steckschwein/code/tree/master/steckos/libsrc/util/hex2dec.s#L5>hextodec</a></h3><blockquote><p>8bit hex to decimal converter</p></blockquote><dl><dt>In</dt><dd>A, value to convert</dd><dt>Out</dt><dd>A, ones<br>X, tens<br>Y, hundreds</dd></dl><hr><h3 id=a-namestrout-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrcutilstroutsl44strouta><a name=strout target=_blank href=https://github.com/Steckschwein/code/tree/master/steckos/libsrc/util/strout.s#L44>strout</a></h3><blockquote><p>Output string on active output device</p></blockquote><dl><dt>In</dt><dd>A, lowbyte of string address<br>X, highbyte of string address</dd></dl><hr><h2 id=vdp>vdp</h2><p><a href=/#gfx_circle>gfx_circle</a> | <a href=/#gfx_line>gfx_line</a> | <a href=/#gfx_plot>gfx_plot</a> | <a href=/#gfx_point>gfx_point</a> | <a href=/#vdp_bgcolor>vdp_bgcolor</a> | <a href=/#vdp_cmd_hmmv>vdp_cmd_hmmv</a> | <a href=/#vdp_fill>vdp_fill</a> | <a href=/#vdp_fills>vdp_fills</a> | <a href=/#vdp_gfx1_blank>vdp_gfx1_blank</a> | <a href=/#vdp_gfx1_on>vdp_gfx1_on</a> | <a href=/#vdp_gfx7_set_pixel_direct>vdp_gfx7_set_pixel_direct</a> | <a href=/#vdp_init_reg>vdp_init_reg</a> | <a href=/#vdp_mc_blank>vdp_mc_blank</a> | <a href=/#vdp_mc_init_screen>vdp_mc_init_screen</a> | <a href=/#vdp_mc_on>vdp_mc_on</a> | <a href=/#vdp_mc_set_pixel>vdp_mc_set_pixel</a> | <a href=/#vdp_memcpy>vdp_memcpy</a> | <a href=/#vdp_memcpys>vdp_memcpys</a> | <a href=/#vdp_mode2_blank>vdp_mode2_blank</a> | <a href=/#vdp_mode2_on>vdp_mode2_on</a> | <a href=/#vdp_mode2_set_pixel>vdp_mode2_set_pixel</a> | <a href=/#vdp_mode3_on>vdp_mode3_on</a> | <a href=/#vdp_mode6_blank>vdp_mode6_blank</a> | <a href=/#vdp_mode6_on>vdp_mode6_on</a> | <a href=/#vdp_mode6_set_pixel>vdp_mode6_set_pixel</a> | <a href=/#vdp_mode7_blank>vdp_mode7_blank</a> | <a href=/#vdp_mode7_on>vdp_mode7_on</a> | <a href=/#vdp_mode7_set_pixel>vdp_mode7_set_pixel</a> | <a href=/#vdp_mode_sprites_off>vdp_mode_sprites_off</a> | <a href=/#vdp_set_reg>vdp_set_reg</a> | <a href=/#vdp_text_blank>vdp_text_blank</a> | <a href=/#vdp_text_on>vdp_text_on</a> | <a href=/#vdp_wait_cmd>vdp_wait_cmd</a> |</p><hr><h3 id=a-namegfx_circle-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrct99xxgfx_circlesl36gfx_circlea><a name=gfx_circle target=_blank href=https://github.com/Steckschwein/code/tree/master/steckos/libsrc/t99xx/gfx_circle.s#L36>gfx_circle</a></h3><blockquote><p>draw circle</p></blockquote><dl><dt>In</dt><dd>A/Y - pointer to circle_t struct</dd></dl><hr><h3 id=a-namegfx_line-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrct99xxgfx_linesl37gfx_linea><a name=gfx_line target=_blank href=https://github.com/Steckschwein/code/tree/master/steckos/libsrc/t99xx/gfx_line.s#L37>gfx_line</a></h3><blockquote><p>draw line according to data in given line struct</p></blockquote><dl><dt>In</dt><dd>A/Y ptr to line_t struct</dd></dl><hr><h3 id=a-namegfx_plot-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrct99xxgfx_plotsl66gfx_plota><a name=gfx_plot target=_blank href=https://github.com/Steckschwein/code/tree/master/steckos/libsrc/t99xx/gfx_plot.s#L66>gfx_plot</a></h3><blockquote><p>plot pixel</p></blockquote><dl><dt>In</dt><dd>A/Y - pointer to plot_t struct</dd></dl><hr><h3 id=a-namegfx_point-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrct99xxgfx_pointsl36gfx_pointa><a name=gfx_point target=_blank href=https://github.com/Steckschwein/code/tree/master/steckos/libsrc/t99xx/gfx_point.s#L36>gfx_point</a></h3><blockquote><p>read pixel value</p></blockquote><dl><dt>In</dt><dd>A/Y - pointer to plot_t struct</dd><dt>Out</dt><dd>Y - color of pixel at given plot_t</dd></dl><hr><h3 id=a-namevdp_bgcolor-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrct99xxt99xxsl42vdp_bgcolora><a name=vdp_bgcolor target=_blank href=https://github.com/Steckschwein/code/tree/master/steckos/libsrc/t99xx/t99xx.s#L42>vdp_bgcolor</a></h3><blockquote></blockquote><dl><dt>In</dt><dd>A - color</dd></dl><hr><h3 id=a-namevdp_cmd_hmmv-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrct99xxt99xx_cmd_hmmvsl35vdp_cmd_hmmva><a name=vdp_cmd_hmmv target=_blank href=https://github.com/Steckschwein/code/tree/master/steckos/libsrc/t99xx/t99xx_cmd_hmmv.s#L35>vdp_cmd_hmmv</a></h3><blockquote><p>execute highspeed memory move (vdp/vram) or fill</p></blockquote><dl><dt>In</dt><dd>A/X - ptr to rectangle coordinates (4 word with x1,y1, len x, len y)<br>Y - color to fill in (reg #44)</dd></dl><hr><h3 id=a-namevdp_fill-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrct99xxt99xx_fillsl31vdp_filla><a name=vdp_fill target=_blank href=https://github.com/Steckschwein/code/tree/master/steckos/libsrc/t99xx/t99xx_fill.s#L31>vdp_fill</a></h3><blockquote><p>fill vdp VRAM with given value page wise</p></blockquote><dl><dt>In</dt><dd>A - byte to fill<br>X - amount of 256byte blocks (page counter)</dd></dl><hr><h3 id=a-namevdp_fills-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrct99xxt99xx_fillsl45vdp_fillsa><a name=vdp_fills target=_blank href=https://github.com/Steckschwein/code/tree/master/steckos/libsrc/t99xx/t99xx_fill.s#L45>vdp_fills</a></h3><blockquote><p>fill vdp VRAM with given value</p></blockquote><dl><dt>In</dt><dd>A - value to write<br>X - amount of bytes</dd></dl><hr><h3 id=a-namevdp_gfx1_blank-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrct99xxmode1sl36vdp_gfx1_blanka><a name=vdp_gfx1_blank target=_blank href=https://github.com/Steckschwein/code/tree/master/steckos/libsrc/t99xx/mode1.s#L36>vdp_gfx1_blank</a></h3><blockquote></blockquote><hr><h3 id=a-namevdp_gfx1_on-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrct99xxmode1sl43vdp_gfx1_ona><a name=vdp_gfx1_on target=_blank href=https://github.com/Steckschwein/code/tree/master/steckos/libsrc/t99xx/mode1.s#L43>vdp_gfx1_on</a></h3><blockquote><p>gfx mode 1 - 32x24 character mode, 16 colors with same color for 8 characters in a block</p></blockquote><hr><h3 id=a-namevdp_gfx7_set_pixel_direct-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrct99xxmode7_setpixelsl67vdp_gfx7_set_pixel_directa><a name=vdp_gfx7_set_pixel_direct target=_blank href=https://github.com/Steckschwein/code/tree/master/steckos/libsrc/t99xx/mode7_setpixel.s#L67>vdp_gfx7_set_pixel_direct</a></h3><blockquote></blockquote><dl><dt>In</dt><dd>X - x coordinate [0..ff]<br>Y - y coordinate [0..bf]<br>A - color GRB [0..ff] as 332</dd></dl><hr><h3 id=a-namevdp_init_reg-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrct99xxt99xx_initsl33vdp_init_rega><a name=vdp_init_reg target=_blank href=https://github.com/Steckschwein/code/tree/master/steckos/libsrc/t99xx/t99xx_init.s#L33>vdp_init_reg</a></h3><blockquote><p>setup video registers upon given table starting from register #R.X down to #R0</p></blockquote><dl><dt>In</dt><dd>X - length of init table, corresponds to video register to start R#+X - e.g. X=10 start with R#10<br>A/Y - pointer to vdp init table</dd></dl><hr><h3 id=a-namevdp_mc_blank-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrct99xxmode_mcsl93vdp_mc_blanka><a name=vdp_mc_blank target=_blank href=https://github.com/Steckschwein/code/tree/master/steckos/libsrc/t99xx/mode_mc.s#L93>vdp_mc_blank</a></h3><blockquote><p>blank multi color mode, set all pixel to black</p></blockquote><dl><dt>In</dt><dd>A - color to blank</dd></dl><hr><h3 id=a-namevdp_mc_init_screen-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrct99xxmode_mcsl60vdp_mc_init_screena><a name=vdp_mc_init_screen target=_blank href=https://github.com/Steckschwein/code/tree/master/steckos/libsrc/t99xx/mode_mc.s#L60>vdp_mc_init_screen</a></h3><blockquote><p>init mc screen</p></blockquote><hr><h3 id=a-namevdp_mc_on-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrct99xxmode_mcsl38vdp_mc_ona><a name=vdp_mc_on target=_blank href=https://github.com/Steckschwein/code/tree/master/steckos/libsrc/t99xx/mode_mc.s#L38>vdp_mc_on</a></h3><blockquote><p>gfx multi color mode - 4x4px blocks where each can have one of the 15 colors</p></blockquote><hr><h3 id=a-namevdp_mc_set_pixel-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrct99xxmode_mc_setpixelsl33vdp_mc_set_pixela><a name=vdp_mc_set_pixel target=_blank href=https://github.com/Steckschwein/code/tree/master/steckos/libsrc/t99xx/mode_mc_setpixel.s#L33>vdp_mc_set_pixel</a></h3><blockquote><p>set pixel to mc screen - VRAM ADDRESS = 8(INT(X DIV 2)) + 256(INT(Y DIV 8)) + (Y MOD 8)</p></blockquote><dl><dt>In</dt><dd>X - x coordinate [0..3f]<br>Y - y coordinate [0..2f]<br>A - color [0..f]</dd></dl><hr><h3 id=a-namevdp_memcpy-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrct99xxt99x_memcpysl33vdp_memcpya><a name=vdp_memcpy target=_blank href=https://github.com/Steckschwein/code/tree/master/steckos/libsrc/t99xx/t99x_memcpy.s#L33>vdp_memcpy</a></h3><blockquote><p>copy data from host memory denoted by pointer (A/Y) to vdp VRAM (page wise). the VRAM address must be setup beforehand e.g. with macro vdp_vram_w<address></p></blockquote><dl><dt>In</dt><dd>X - amount of 256byte blocks (page counter)<br>A/Y - pointer to source data</dd></dl><hr><h3 id=a-namevdp_memcpys-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrct99xxt99x_memcpysl58vdp_memcpysa><a name=vdp_memcpys target=_blank href=https://github.com/Steckschwein/code/tree/master/steckos/libsrc/t99xx/t99x_memcpy.s#L58>vdp_memcpys</a></h3><blockquote><p>copy memory to vdp VRAM page wise</p></blockquote><dl><dt>In</dt><dd>X - amount of bytes to copy<br>A/Y - pointer to data</dd></dl><hr><h3 id=a-namevdp_mode2_blank-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrct99xxmode2sl71vdp_mode2_blanka><a name=vdp_mode2_blank target=_blank href=https://github.com/Steckschwein/code/tree/master/steckos/libsrc/t99xx/mode2.s#L71>vdp_mode2_blank</a></h3><blockquote><p>blank gfx mode 2 with</p></blockquote><dl><dt>In</dt><dd>A - color to fill [0..f]</dd></dl><hr><h3 id=a-namevdp_mode2_on-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrct99xxmode2sl37vdp_mode2_ona><a name=vdp_mode2_on target=_blank href=https://github.com/Steckschwein/code/tree/master/steckos/libsrc/t99xx/mode2.s#L37>vdp_mode2_on</a></h3><blockquote><p>gfx 2 - each pixel can be addressed - e.g. for image</p></blockquote><hr><h3 id=a-namevdp_mode2_set_pixel-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrct99xxmode2_setpixelsl33vdp_mode2_set_pixela><a name=vdp_mode2_set_pixel target=_blank href=https://github.com/Steckschwein/code/tree/master/steckos/libsrc/t99xx/mode2_setpixel.s#L33>vdp_mode2_set_pixel</a></h3><blockquote><p>set pixel to gfx2 mode screen - VRAM ADDRESS = 8(INT(X DIV 8)) + 256(INT(Y DIV 8)) + (Y MOD 8)</p></blockquote><dl><dt>In</dt><dd>X - x coordinate [0..ff]<br>Y - y coordinate [0..bf]<br>A - color [0..f]</dd></dl><hr><h3 id=a-namevdp_mode3_on-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrct99xxmode3sl36vdp_mode3_ona><a name=vdp_mode3_on target=_blank href=https://github.com/Steckschwein/code/tree/master/steckos/libsrc/t99xx/mode3.s#L36>vdp_mode3_on</a></h3><blockquote><p>mode 3 on</p></blockquote><hr><h3 id=a-namevdp_mode6_blank-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrct99xxmode6sl64vdp_mode6_blanka><a name=vdp_mode6_blank target=_blank href=https://github.com/Steckschwein/code/tree/master/steckos/libsrc/t99xx/mode6.s#L64>vdp_mode6_blank</a></h3><blockquote><p>blank gfx mode 6 with given color</p></blockquote><dl><dt>In</dt><dd>Y - color to fill 4|4 Bit</dd></dl><hr><h3 id=a-namevdp_mode6_on-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrct99xxmode6sl36vdp_mode6_ona><a name=vdp_mode6_on target=_blank href=https://github.com/Steckschwein/code/tree/master/steckos/libsrc/t99xx/mode6.s#L36>vdp_mode6_on</a></h3><blockquote><p>gfx 6 - 512x192/212px, 16colors, sprite mode 2</p></blockquote><hr><h3 id=a-namevdp_mode6_set_pixel-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrct99xxmode6_setpixelsl31vdp_mode6_set_pixela><a name=vdp_mode6_set_pixel target=_blank href=https://github.com/Steckschwein/code/tree/master/steckos/libsrc/t99xx/mode6_setpixel.s#L31>vdp_mode6_set_pixel</a></h3><blockquote><p>set pixel to gfx6 mode screen - VRAM ADDRESS = 8(INT(X DIV 2)) + 256(INT(Y DIV 8)) + (Y MOD 8)</p></blockquote><dl><dt>In</dt><dd>X - x coordinate [0..ff]<br>Y - y coordinate [0..bf]<br>A - color [0..f] and bit 7 MSB x coordinate</dd></dl><hr><h3 id=a-namevdp_mode7_blank-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrct99xxmode7sl58vdp_mode7_blanka><a name=vdp_mode7_blank target=_blank href=https://github.com/Steckschwein/code/tree/master/steckos/libsrc/t99xx/mode7.s#L58>vdp_mode7_blank</a></h3><blockquote><p>blank gfx mode 7 with</p></blockquote><dl><dt>In</dt><dd>Y - color to fill in GRB (3+3+2)</dd></dl><hr><h3 id=a-namevdp_mode7_on-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrct99xxmode7sl32vdp_mode7_ona><a name=vdp_mode7_on target=_blank href=https://github.com/Steckschwein/code/tree/master/steckos/libsrc/t99xx/mode7.s#L32>vdp_mode7_on</a></h3><blockquote><p>gfx 7 - each pixel can be addressed - e.g. for image</p></blockquote><hr><h3 id=a-namevdp_mode7_set_pixel-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrct99xxmode7_setpixelsl31vdp_mode7_set_pixela><a name=vdp_mode7_set_pixel target=_blank href=https://github.com/Steckschwein/code/tree/master/steckos/libsrc/t99xx/mode7_setpixel.s#L31>vdp_mode7_set_pixel</a></h3><blockquote><p>VRAM ADDRESS = .X + 256*.Y</p></blockquote><dl><dt>In</dt><dd>X - x coordinate [0..ff]<br>Y - y coordinate [0..bf]<br>. A - color [0..ff] as GRB 332 (green bit 7-5, red bit 4-2, blue bit 1-0)</dd></dl><hr><h3 id=a-namevdp_mode_sprites_off-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrct99xxt99xx_spritessl31vdp_mode_sprites_offa><a name=vdp_mode_sprites_off target=_blank href=https://github.com/Steckschwein/code/tree/master/steckos/libsrc/t99xx/t99xx_sprites.s#L31>vdp_mode_sprites_off</a></h3><blockquote></blockquote><hr><h3 id=a-namevdp_set_reg-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrct99xxt99xxsl47vdp_set_rega><a name=vdp_set_reg target=_blank href=https://github.com/Steckschwein/code/tree/master/steckos/libsrc/t99xx/t99xx.s#L47>vdp_set_reg</a></h3><blockquote><p>set value to vdp register</p></blockquote><dl><dt>In</dt><dd>A - value<br>Y - register</dd></dl><hr><h3 id=a-namevdp_text_blank-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrct99xxmode_textsl48vdp_text_blanka><a name=vdp_text_blank target=_blank href=https://github.com/Steckschwein/code/tree/master/steckos/libsrc/t99xx/mode_text.s#L48>vdp_text_blank</a></h3><blockquote><p>text mode blank screen and color vram</p></blockquote><hr><h3 id=a-namevdp_text_on-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrct99xxmode_textsl63vdp_text_ona><a name=vdp_text_on target=_blank href=https://github.com/Steckschwein/code/tree/master/steckos/libsrc/t99xx/mode_text.s#L63>vdp_text_on</a></h3><blockquote><p>text mode - 40x24/80x24 character mode, 2 colors</p></blockquote><dl><dt>In</dt><dd>A - color settings (#R07)</dd></dl><hr><h3 id=a-namevdp_wait_cmd-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrct99xxt99xx_cmdsl31vdp_wait_cmda><a name=vdp_wait_cmd target=_blank href=https://github.com/Steckschwein/code/tree/master/steckos/libsrc/t99xx/t99xx_cmd.s#L31>vdp_wait_cmd</a></h3><blockquote><p>wait until a pending command has been finished</p></blockquote><hr></div></article></main></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2024 Steckschwein.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>