<!doctype html><html class=no-js lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>library - Steckschwein</title>
<script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=dns-prefetch href=//fonts.googleapis.com><link rel=dns-prefetch href=//fonts.gstatic.com><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title=Steckschwein rel=home><div class="logo__item logo__text"><div class=logo__title>Steckschwein</div><div class=logo__tagline>An 8bit computer for the 21st century</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/about/><span class=menu__text>About</span></a></li><li class=menu__item><a class=menu__link href=/><span class=menu__text>Blog</span></a></li><li class=menu__item><a class=menu__link href=/hardware/><span class=menu__text>Hardware</span></a></li><li class=menu__item><a class=menu__link href=/software/><span class=menu__text>Software</span></a></li><li class=menu__item><a class=menu__link href=/resources/><span class=menu__text>Resources</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>library</h1><div class="post__meta meta"><div class="meta__item-categories meta__item"><svg class="meta__icon icon icon-category" width="16" height="16" viewBox="0 0 16 16"><path d="m7 2 1 2h8v11H0V2z"/></svg><span class=meta__text><a class=meta__link href=/categories/software/ rel=category>Software</a></span></div></div></header><div class="content post__content clearfix"><h1 id=library>library</h1><p><a href=#fat32>fat32</a> | <a href=#joystick>joystick</a> | <a href=#keyboard>keyboard</a> | <a href=#sdcard>sdcard</a> | <a href=#spi>spi</a> | <a href=#uart>uart</a> | <a href=#util>util</a> | <a href=#vdp>vdp</a> |</p><hr><h2 id=fat32>fat32</h2><p><a href=#fat_chdir>fat_chdir</a> | <a href=#fat_close>fat_close</a> | <a href=#fat_fopen>fat_fopen</a> | <a href=#fat_fread_byte>fat_fread_byte</a> | <a href=#fat_fread_vollgas>fat_fread_vollgas</a> | <a href=#fat_fseek>fat_fseek</a> | <a href=#fat_get_root_and_pwd>fat_get_root_and_pwd</a> | <a href=#fat_mkdir>fat_mkdir</a> | <a href=#fat_mount>fat_mount</a> | <a href=#fat_opendir>fat_opendir</a> | <a href=#fat_read_direntry>fat_read_direntry</a> | <a href=#fat_readdir>fat_readdir</a> | <a href=#fat_rmdir>fat_rmdir</a> | <a href=#fat_unlink>fat_unlink</a> | <a href=#fat_update_direntry>fat_update_direntry</a> | <a href=#fat_write_byte>fat_write_byte</a> |</p><hr><h3 id=a-namefat_chdir-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrcfat32fat32_dirsl72fat_chdira>fat_chdir</h3><blockquote><p>change current directory</p></blockquote><dl><dt>In</dt><dd>A, low byte of pointer to zero terminated string with the file pathX, high byte of pointer to zero terminated string with the file path</dd><dt>Out</dt><dd>C, C=0 on success (A=0), C=1 and A= otherwiseX, index into fd_area of the opened directory (which is FD_INDEX_CURRENT_DIR)</dd></dl><hr><h3 id=a-namefat_close-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrcfat32fat32sl234fat_closea>fat_close</h3><blockquote><p>close file, update dir entry and free file descriptor quietly</p></blockquote><dl><dt>In</dt><dd>X, index into fd_area of the opened file</dd><dt>Out</dt><dd>C, 0 on success, 1 on errorA, error code</dd></dl><hr><h3 id=a-namefat_fopen-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrcfat32fat32sl187fat_fopena>fat_fopen</h3><blockquote><p>open file</p></blockquote><dl><dt>In</dt><dd>A, low byte of pointer to zero terminated string with the file pathX, high byte of pointer to zero terminated string with the file pathY, file mode constants O_RDONLY = $01, O_WRONLY = $02, O_RDWR = $03, O_CREAT = $10, O_TRUNC = $20, O_APPEND = $40, O_EXCL = $80</dd><dt>Out</dt><dd>C, 0 on success, 1 on errorA, error codeX, index into fd_area of the opened file</dd></dl><hr><h3 id=a-namefat_fread_byte-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrcfat32fat32sl114fat_fread_bytea>fat_fread_byte</h3><blockquote><p>read byte from file</p></blockquote><dl><dt>In</dt><dd>X, offset into fd_area</dd><dt>Out</dt><dd>C=0 on success and A=received byte, C=1 on error and A=error code or C=1 and A=0 (EOK) if EOF is reached</dd></dl><hr><h3 id=a-namefat_fread_vollgas-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrcfat32fat_fread_vollgassl47fat_fread_vollgasa>fat_fread_vollgas</h3><blockquote><p>read the file denoted by given file descriptor (X) until EOF and store data at given address (A/Y)</p></blockquote><dl><dt>In</dt><dd>X - offset into fd_areaA/Y - pointer to target address</dd><dt>Out</dt><dd>C=0 on success, C=1 on error and A=error code or C=1 and A=0 (EOK) if EOF is reached</dd></dl><hr><h3 id=a-namefat_fseek-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrcfat32fat32_seeksl45fat_fseeka>fat_fseek</h3><blockquote><p>seek n bytes within file denoted by the given FD</p></blockquote><dl><dt>In</dt><dd>X - offset into fd_areaA/Y - pointer to seek_struct - @see fat32.inc</dd><dt>Out</dt><dd>C=0 on success (A=0), C=1 and A= or C=1 and A=0 (EOK) if EOF reached</dd></dl><hr><h3 id=a-namefat_get_root_and_pwd-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrcfat32fat32_cwdsl47fat_get_root_and_pwda>fat_get_root_and_pwd</h3><blockquote><p>get current directory</p></blockquote><dl><dt>In</dt><dd>A, low byte of address to write the current work directory string intoY, high byte address to write the current work directory string intoX, size of result buffer pointet to by A/X</dd><dt>Out</dt><dd>C, 0 on success, 1 on errorA, error code</dd></dl><hr><h3 id=a-namefat_mkdir-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrcfat32fat32_write_dirsl74fat_mkdira>fat_mkdir</h3><blockquote><p>create directory denoted by given path in A/X</p></blockquote><dl><dt>In</dt><dd>A, low byte of pointer to directory stringX, high byte of pointer to directory string</dd><dt>Out</dt><dd>C, 0 on success, 1 on errorA, error code</dd></dl><hr><h3 id=a-namefat_mount-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrcfat32fat32_mountsl47fat_mounta>fat_mount</h3><blockquote><p>mount fat32 file system</p></blockquote><dl><dt>Out</dt><dd>C, 0 on success, 1 on errorA, error code</dd></dl><hr><h3 id=a-namefat_opendir-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrcfat32fat32_dirsl50fat_opendira>fat_opendir</h3><blockquote><p>open directory by given path starting from directory given as file descriptor</p></blockquote><dl><dt>In</dt><dd>A/X - pointer to string with the file path</dd><dt>Out</dt><dd>C, C=0 on success (A=0), C=1 and A= otherwiseX, index into fd_area of the opened directory</dd></dl><hr><h3 id=a-namefat_read_direntry-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrcfat32fat32_coresl250fat_read_direntrya>fat_read_direntry</h3><blockquote><p>read the block with the directory entry of the given file descriptor, dirptr is adjusted accordingly</p></blockquote><dl><dt>In</dt><dd>X - file descriptor of the file the directory entry should be read</dd><dt>Out</dt><dd>C - C=0 on success (A=0), C=1 and A= otherwisedirptr pointing to the corresponding directory entry of type F32DirEntry</dd></dl><hr><h3 id=a-namefat_readdir-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrcfat32fat32_dirsl89fat_readdira>fat_readdir</h3><blockquote><p>readdir expects a pointer in A/Y to store the next F32DirEntry structure representing the next FAT32 directory entry in the directory stream pointed of directory X.</p></blockquote><dl><dt>In</dt><dd>X - file descriptor to fd_area of the directoryA/Y - pointer to target buffer which must be .sizeof(F32DirEntry)</dd><dt>Out</dt><dd>C - C = 0 on success (A=0), C = 1 and A = otherwise. C=1/A=EOK if end of directory is reached</dd></dl><hr><h3 id=a-namefat_rmdir-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrcfat32fat32_write_dirsl49fat_rmdira>fat_rmdir</h3><blockquote><p>delete a directory entry denoted by given path in A/X</p></blockquote><dl><dt>In</dt><dd>A, low byte of pointer to directory stringX, high byte of pointer to directory string</dd><dt>Out</dt><dd>C, 0 on success, 1 on errorA, error code</dd></dl><hr><h3 id=a-namefat_unlink-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrcfat32fat32_writesl544fat_unlinka>fat_unlink</h3><blockquote><p>unlink (delete) a file denoted by given path in A/X</p></blockquote><dl><dt>In</dt><dd>A, low byte of pointer to zero terminated string with the file pathX, high byte of pointer to zero terminated string with the file path</dd><dt>Out</dt><dd>C, C=0 on success (A=0), C=1 and A= otherwise</dd></dl><hr><h3 id=a-namefat_update_direntry-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrcfat32fat32_write_dirsl244fat_update_direntrya>fat_update_direntry</h3><blockquote><p>update direntry given as pointer (A/Y) to FAT32 directory entry structure for file fd (X).</p></blockquote><dl><dt>In</dt><dd>X - file descriptor to fd_area of the fileA/Y - pointer to direntry buffer with updated direntry data of type F32DirEntry</dd><dt>Out</dt><dd>C - C = 0 on success (A=0), C = 1 and A = otherwise. C=1/A=EOK if end of directory is reached</dd></dl><hr><h3 id=a-namefat_write_byte-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrcfat32fat32_writesl56fat_write_bytea>fat_write_byte</h3><blockquote><p>write byte to file</p></blockquote><dl><dt>In</dt><dd>A, byte to writeX, offset into fs area</dd><dt>Out</dt><dd>C, 0 on success, 1 on error</dd></dl><hr><h2 id=joystick>joystick</h2><p><a href=#joystick_detect>joystick_detect</a> | <a href=#joystick_read>joystick_read</a> |</p><hr><h3 id=a-namejoystick_detect-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrcjoystickjoysticksl45joystick_detecta>joystick_detect</h3><blockquote><p>detect joystick</p></blockquote><dl><dt>Out</dt><dd>Z, Z=1 no joystick detected, Z=0 joystick detected, port in AA, detected joystick port, JOY_PORT1 or JOY_PORT2</dd></dl><hr><h3 id=a-namejoystick_read-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrcjoystickjoysticksl17joystick_reada>joystick_read</h3><blockquote><p>read state of specified joystick</p></blockquote><dl><dt>Out</dt><dd>A, joystick button state - bit 0-4</dd></dl><hr><h2 id=keyboard>keyboard</h2><p><a href=#fetchkey>fetchkey</a> | <a href=#getkey>getkey</a> |</p><hr><h3 id=a-namefetchkey-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrckeyboardkeyboardsl40fetchkeya>fetchkey</h3><blockquote><p>fetch byte from keyboard controller</p></blockquote><dl><dt>Out</dt><dd>A, fetched key / error codeC, 1 - key was fetched, 0 - nothing fetched</dd></dl><hr><h3 id=a-namegetkey-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrckeyboardkeyboardsl68getkeya>getkey</h3><blockquote><p>get byte from keyboard buffer</p></blockquote><dl><dt>Out</dt><dd>A, fetched keyC, 1 - key was fetched, 0 - nothing fetched</dd></dl><hr><h2 id=sdcard>sdcard</h2><p><a href=#sd_busy_wait>sd_busy_wait</a> | <a href=#sd_cmd>sd_cmd</a> | <a href=#sd_deselect_card>sd_deselect_card</a> | <a href=#sd_read_block>sd_read_block</a> | <a href=#sd_select_card>sd_select_card</a> | <a href=#sd_write_block>sd_write_block</a> | <a href=#sdcard_init>sdcard_init</a> |</p><hr><h3 id=a-namesd_busy_wait-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrcsdcardsdcardsl423sd_busy_waita>sd_busy_wait</h3><blockquote><p>wait while sd card is busy</p></blockquote><dl><dt>Out</dt><dd>C, C = 0 on success, C = 1 on error (timeout)</dd><dt>Clobbers</dt><dd>A,X,Y</dd></dl><hr><h3 id=a-namesd_cmd-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrcsdcardsdcardsl235sd_cmda>sd_cmd</h3><blockquote><p>send command to sd card</p></blockquote><dl><dt>In</dt><dd>A, command bytesd_cmd_param, command parameters</dd><dt>Out</dt><dd>A, SD Card R1 status byte</dd><dt>Clobbers</dt><dd>A,X,Y</dd></dl><hr><h3 id=a-namesd_deselect_card-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrcsdcardsdcardsl324sd_deselect_carda>sd_deselect_card</h3><blockquote><p>Read block from SD Card</p></blockquote><dl><dt>Out</dt><dd>A, error codeC, 0 - success, 1 - error</dd><dt>Clobbers</dt><dd>X</dd></dl><hr><h3 id=a-namesd_read_block-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrcsdcardsdcardsl295sd_read_blocka>sd_read_block</h3><blockquote><p>Read block from SD Card</p></blockquote><dl><dt>In</dt><dd>lba_addr, LBA address of blocksd_blkptr, target adress for the block data to be read</dd><dt>Out</dt><dd>A, error codeC, 0 - success, 1 - error</dd><dt>Clobbers</dt><dd>A,X,Y</dd></dl><hr><h3 id=a-namesd_select_card-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrcsdcardsdcardsl409sd_select_carda>sd_select_card</h3><blockquote><p>select sd card, pull CS line to low with busy wait</p></blockquote><dl><dt>Out</dt><dd>C, C = 0 on success, C = 1 on error (timeout)</dd><dt>Clobbers</dt><dd>A,X,Y</dd></dl><hr><h3 id=a-namesd_write_block-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrcsdcardsd_write_blocksl56sd_write_blocka>sd_write_block</h3><blockquote><p>Write block to SD Card</p></blockquote><dl><dt>In</dt><dd>lba_addr, LBA address of blocksd_blkptr, target adress for the block data to be read</dd><dt>Out</dt><dd>A, error codeC, 0 - success, 1 - error</dd><dt>Clobbers</dt><dd>A,X,Y</dd></dl><hr><h3 id=a-namesdcard_init-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrcsdcardsdcardsl65sdcard_inita>sdcard_init</h3><blockquote><p>initialize sd card in SPI mode</p></blockquote><dl><dt>Out</dt><dd>Z,1 on success, 0 on errorA, error code</dd><dt>Clobbers</dt><dd>A,X,Y</dd></dl><hr><h2 id=spi>spi</h2><p><a href=#spi_deselect>spi_deselect</a> | <a href=#spi_r_byte>spi_r_byte</a> | <a href=#spi_rw_byte>spi_rw_byte</a> | <a href=#spi_select_device>spi_select_device</a> |</p><hr><h3 id=a-namespi_deselect-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrcspispi_deselectsl33spi_deselecta>spi_deselect</h3><blockquote><p>deselect all SPI devices</p></blockquote><hr><h3 id=a-namespi_r_byte-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrcspispi_r_bytesl38spi_r_bytea>spi_r_byte</h3><blockquote><p>read byte via SPI</p></blockquote><dl><dt>Out</dt><dd>A, received byte</dd><dt>Clobbers</dt><dd>A,X</dd></dl><hr><h3 id=a-namespi_rw_byte-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrcspispi_rw_bytesl40spi_rw_bytea>spi_rw_byte</h3><blockquote><p>transmit byte via SPI</p></blockquote><dl><dt>In</dt><dd>A, byte to transmit</dd><dt>Out</dt><dd>A, received byte</dd><dt>Clobbers</dt><dd>A,X,Y</dd></dl><hr><h3 id=a-namespi_select_device-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrcspispi_select_devicesl40spi_select_devicea>spi_select_device</h3><blockquote><p>select spi device given in A. the method is aware of the current processor state, especially the interrupt flag</p></blockquote><dl><dt>In</dt><dd>; A, spi device, one of devices see spi.inc</dd><dt>Out</dt><dd>Z = 1 spi for given device could be selected (not busy), Z=0 otherwise</dd></dl><hr><h2 id=uart>uart</h2><p><a href=#uart_init>uart_init</a> | <a href=#uart_rx>uart_rx</a> | <a href=#uart_rx_nowait>uart_rx_nowait</a> | <a href=#uart_tx>uart_tx</a> |</p><hr><h3 id=a-nameuart_init-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrcuart16550uart_initsl11uart_inita>uart_init</h3><blockquote><p>initialize UART with parameters from nvram</p></blockquote><dl><dt>Clobbers</dt><dd>A,X,Y</dd></dl><hr><h3 id=a-nameuart_rx-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrcuart16550uart_rxsl9uart_rxa>uart_rx</h3><blockquote><p>receive byte</p></blockquote><dl><dt>Out</dt><dd>A, received byte</dd></dl><hr><h3 id=a-nameuart_rx_nowait-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrcuart16550uart_rx_nowaitsl7uart_rx_nowaita>uart_rx_nowait</h3><blockquote><p>receive byte, no wait</p></blockquote><dl><dt>Out</dt><dd>A, received byteC, 0 - no byte received, 1 - received byte</dd></dl><hr><h3 id=a-nameuart_tx-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrcuart16550uart_txsl10uart_txa>uart_tx</h3><blockquote><p>send byte</p></blockquote><dl><dt>In</dt><dd>A, byte to send</dd></dl><hr><h2 id=util>util</h2><p><a href=#atoi>atoi</a> | <a href=#b2ad>b2ad</a> | <a href=#b2ad2>b2ad2</a> | <a href=#bin2dual>bin2dual</a> | <a href=#hexout>hexout</a> | <a href=#hextodec>hextodec</a> | <a href=#strout>strout</a> |</p><hr><h3 id=a-nameatoi-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrcutilatoisl31atoia>atoi</h3><blockquote><p>convert ascii digit to binary</p></blockquote><dl><dt>In</dt><dd>A, value to convert</dd><dt>Out</dt><dd>A, binary number</dd></dl><hr><h3 id=a-nameb2ad-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrcutilb2adsl7b2ada>b2ad</h3><blockquote><p>output 8bit value as 2 digit decimal</p></blockquote><dl><dt>In</dt><dd>A, value to output</dd></dl><hr><h3 id=a-nameb2ad2-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrcutilb2ad2sl8b2ad2a>b2ad2</h3><blockquote><p>output 8bit value as 3 digit decimal</p></blockquote><dl><dt>In</dt><dd>A, value to output</dd></dl><hr><h3 id=a-namebin2dual-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrcutilbin2dualsl6bin2duala>bin2dual</h3><blockquote><p>output 8bit value as binary string</p></blockquote><dl><dt>In</dt><dd>A, value to output</dd></dl><hr><h3 id=a-namehexout-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrcutilhexoutsl40hexouta>hexout</h3><blockquote><p>output 8bit value as hex</p></blockquote><dl><dt>In</dt><dd>A, value to convert</dd></dl><hr><h3 id=a-namehextodec-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrcutilhex2decsl5hextodeca>hextodec</h3><blockquote><p>8bit hex to decimal converter</p></blockquote><dl><dt>In</dt><dd>A, value to convert</dd><dt>Out</dt><dd>A, onesX, tensY, hundreds</dd></dl><hr><h3 id=a-namestrout-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrcutilstroutsl44strouta>strout</h3><blockquote><p>Output string on active output device</p></blockquote><dl><dt>In</dt><dd>A, lowbyte of string addressX, highbyte of string address</dd></dl><hr><h2 id=vdp>vdp</h2><p><a href=#gfx_circle>gfx_circle</a> | <a href=#gfx_line>gfx_line</a> | <a href=#gfx_plot>gfx_plot</a> | <a href=#gfx_point>gfx_point</a> | <a href=#gfx_rectangle>gfx_rectangle</a> | <a href=#ppm_load_image>ppm_load_image</a> | <a href=#vdp_bgcolor>vdp_bgcolor</a> | <a href=#vdp_cmd_hmmv>vdp_cmd_hmmv</a> | <a href=#vdp_fill>vdp_fill</a> | <a href=#vdp_fills>vdp_fills</a> | <a href=#vdp_gfx1_blank>vdp_gfx1_blank</a> | <a href=#vdp_gfx1_on>vdp_gfx1_on</a> | <a href=#vdp_gfx7_set_pixel_direct>vdp_gfx7_set_pixel_direct</a> | <a href=#vdp_init_reg>vdp_init_reg</a> | <a href=#vdp_mc_blank>vdp_mc_blank</a> | <a href=#vdp_mc_init_screen>vdp_mc_init_screen</a> | <a href=#vdp_mc_on>vdp_mc_on</a> | <a href=#vdp_mc_set_pixel>vdp_mc_set_pixel</a> | <a href=#vdp_memcpy>vdp_memcpy</a> | <a href=#vdp_memcpys>vdp_memcpys</a> | <a href=#vdp_mode2_blank>vdp_mode2_blank</a> | <a href=#vdp_mode2_on>vdp_mode2_on</a> | <a href=#vdp_mode2_set_pixel>vdp_mode2_set_pixel</a> | <a href=#vdp_mode3_on>vdp_mode3_on</a> | <a href=#vdp_mode6_blank>vdp_mode6_blank</a> | <a href=#vdp_mode6_on>vdp_mode6_on</a> | <a href=#vdp_mode6_set_pixel>vdp_mode6_set_pixel</a> | <a href=#vdp_mode7_blank>vdp_mode7_blank</a> | <a href=#vdp_mode7_on>vdp_mode7_on</a> | <a href=#vdp_mode7_set_pixel>vdp_mode7_set_pixel</a> | <a href=#vdp_mode_sprites_off>vdp_mode_sprites_off</a> | <a href=#vdp_set_reg>vdp_set_reg</a> | <a href=#vdp_text_blank>vdp_text_blank</a> | <a href=#vdp_text_on>vdp_text_on</a> | <a href=#vdp_wait_cmd>vdp_wait_cmd</a> |</p><hr><h3 id=a-namegfx_circle-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrct99xxgfx_circlesl36gfx_circlea>gfx_circle</h3><blockquote><p>draw circle</p></blockquote><dl><dt>In</dt><dd>A/Y - pointer to circle_t struct</dd></dl><hr><h3 id=a-namegfx_line-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrct99xxgfx_linesl37gfx_linea>gfx_line</h3><blockquote><p>draw line according to data in given line struct</p></blockquote><dl><dt>In</dt><dd>A/Y ptr to line_t struct</dd></dl><hr><h3 id=a-namegfx_plot-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrct99xxgfx_plotsl66gfx_plota>gfx_plot</h3><blockquote><p>plot pixel</p></blockquote><dl><dt>In</dt><dd>A/Y - pointer to plot_t struct</dd></dl><hr><h3 id=a-namegfx_point-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrct99xxgfx_pointsl36gfx_pointa>gfx_point</h3><blockquote><p>read pixel value</p></blockquote><dl><dt>In</dt><dd>A/Y - pointer to plot_t struct</dd><dt>Out</dt><dd>Y - color of pixel at given plot_t</dd></dl><hr><h3 id=a-namegfx_rectangle-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrct99xxgfx_rectanglesl36gfx_rectanglea>gfx_rectangle</h3><blockquote><p>draw a rectangle according to data in given rectangle struct</p></blockquote><dl><dt>In</dt><dd>A/Y ptr to rectangle_t struct</dd></dl><hr><h3 id=a-nameppm_load_image-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrct99xxppmppmsl65ppm_load_imagea>ppm_load_image</h3><blockquote></blockquote><dl><dt>In</dt><dd>A/X file name to loadY vdp vram page to load ppm into - either 0 for address $00000 or 1 for address $10000</dd><dt>Out</dt><dd>C=0 success and image loaded to vram (mode 7), C=1 otherwise with A/X error code where X ppm specific error, A i/o specific error</dd></dl><hr><h3 id=a-namevdp_bgcolor-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrct99xxt99xxsl42vdp_bgcolora>vdp_bgcolor</h3><blockquote></blockquote><dl><dt>In</dt><dd>A - color</dd></dl><hr><h3 id=a-namevdp_cmd_hmmv-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrct99xxt99xx_cmd_hmmvsl35vdp_cmd_hmmva>vdp_cmd_hmmv</h3><blockquote><p>execute highspeed memory move (vdp/vram) or fill</p></blockquote><dl><dt>In</dt><dd>A/X - ptr to rectangle coordinates (4 word with x1,y1, len x, len y)Y - color to fill in (reg #44)</dd></dl><hr><h3 id=a-namevdp_fill-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrct99xxt99xx_fillsl31vdp_filla>vdp_fill</h3><blockquote><p>fill vdp VRAM with given value page wise</p></blockquote><dl><dt>In</dt><dd>A - byte to fillX - amount of 256byte blocks (page counter)</dd></dl><hr><h3 id=a-namevdp_fills-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrct99xxt99xx_fillsl45vdp_fillsa>vdp_fills</h3><blockquote><p>fill vdp VRAM with given value</p></blockquote><dl><dt>In</dt><dd>A - value to writeX - amount of bytes</dd></dl><hr><h3 id=a-namevdp_gfx1_blank-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrct99xxmode1sl36vdp_gfx1_blanka>vdp_gfx1_blank</h3><blockquote></blockquote><hr><h3 id=a-namevdp_gfx1_on-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrct99xxmode1sl43vdp_gfx1_ona>vdp_gfx1_on</h3><blockquote><p>gfx mode 1 - 32x24 character mode, 16 colors with same color for 8 characters in a block</p></blockquote><hr><h3 id=a-namevdp_gfx7_set_pixel_direct-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrct99xxmode7_setpixelsl63vdp_gfx7_set_pixel_directa>vdp_gfx7_set_pixel_direct</h3><blockquote></blockquote><dl><dt>In</dt><dd>X - x coordinate [0..ff]Y - y coordinate [0..bf]A - color GRB [0..ff] as 332</dd></dl><hr><h3 id=a-namevdp_init_reg-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrct99xxt99xx_initsl33vdp_init_rega>vdp_init_reg</h3><blockquote><p>setup video registers upon given table starting from register #R.X down to #R0</p></blockquote><dl><dt>In</dt><dd>X - length of init table, corresponds to video register to start R#+X - e.g. X=10 start with R#10A/Y - pointer to vdp init table</dd></dl><hr><h3 id=a-namevdp_mc_blank-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrct99xxmode_mcsl93vdp_mc_blanka>vdp_mc_blank</h3><blockquote><p>blank multi color mode, set all pixel to black</p></blockquote><dl><dt>In</dt><dd>A - color to blank</dd></dl><hr><h3 id=a-namevdp_mc_init_screen-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrct99xxmode_mcsl60vdp_mc_init_screena>vdp_mc_init_screen</h3><blockquote><p>init mc screen</p></blockquote><hr><h3 id=a-namevdp_mc_on-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrct99xxmode_mcsl38vdp_mc_ona>vdp_mc_on</h3><blockquote><p>gfx multi color mode - 4x4px blocks where each can have one of the 15 colors</p></blockquote><hr><h3 id=a-namevdp_mc_set_pixel-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrct99xxmode_mc_setpixelsl33vdp_mc_set_pixela>vdp_mc_set_pixel</h3><blockquote><p>set pixel to mc screen - VRAM ADDRESS = 8(INT(X DIV 2)) + 256(INT(Y DIV 8)) + (Y MOD 8)</p></blockquote><dl><dt>In</dt><dd>X - x coordinate [0..3f]Y - y coordinate [0..2f]A - color [0..f]</dd></dl><hr><h3 id=a-namevdp_memcpy-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrct99xxt99x_memcpysl33vdp_memcpya>vdp_memcpy</h3><blockquote><p>copy data from host memory denoted by pointer (A/Y) to vdp VRAM (page wise). the VRAM address must be setup beforehand e.g. with macro vdp_vram_w</p></blockquote><dl><dt>In</dt><dd>X - amount of 256byte blocks (page counter)A/Y - pointer to source data</dd></dl><hr><h3 id=a-namevdp_memcpys-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrct99xxt99x_memcpysl58vdp_memcpysa>vdp_memcpys</h3><blockquote><p>copy memory to vdp VRAM page wise</p></blockquote><dl><dt>In</dt><dd>X - amount of bytes to copyA/Y - pointer to data</dd></dl><hr><h3 id=a-namevdp_mode2_blank-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrct99xxmode2sl71vdp_mode2_blanka>vdp_mode2_blank</h3><blockquote><p>blank gfx mode 2 with</p></blockquote><dl><dt>In</dt><dd>A - color to fill [0..f]</dd></dl><hr><h3 id=a-namevdp_mode2_on-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrct99xxmode2sl37vdp_mode2_ona>vdp_mode2_on</h3><blockquote><p>gfx 2 - each pixel can be addressed - e.g. for image</p></blockquote><hr><h3 id=a-namevdp_mode2_set_pixel-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrct99xxmode2_setpixelsl33vdp_mode2_set_pixela>vdp_mode2_set_pixel</h3><blockquote><p>set pixel to gfx2 mode screen - VRAM ADDRESS = 8(INT(X DIV 8)) + 256(INT(Y DIV 8)) + (Y MOD 8)</p></blockquote><dl><dt>In</dt><dd>X - x coordinate [0..ff]Y - y coordinate [0..bf]A - color [0..f]</dd></dl><hr><h3 id=a-namevdp_mode3_on-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrct99xxmode3sl36vdp_mode3_ona>vdp_mode3_on</h3><blockquote><p>mode 3 on</p></blockquote><hr><h3 id=a-namevdp_mode6_blank-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrct99xxmode6sl64vdp_mode6_blanka>vdp_mode6_blank</h3><blockquote><p>blank gfx mode 6 with given color</p></blockquote><dl><dt>In</dt><dd>Y - color to fill 4|4 Bit</dd></dl><hr><h3 id=a-namevdp_mode6_on-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrct99xxmode6sl36vdp_mode6_ona>vdp_mode6_on</h3><blockquote><p>gfx 6 - 512x192/212px, 16colors, sprite mode 2</p></blockquote><hr><h3 id=a-namevdp_mode6_set_pixel-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrct99xxmode6_setpixelsl31vdp_mode6_set_pixela>vdp_mode6_set_pixel</h3><blockquote><p>set pixel to gfx6 mode screen - VRAM ADDRESS = 8(INT(X DIV 2)) + 256(INT(Y DIV 8)) + (Y MOD 8)</p></blockquote><dl><dt>In</dt><dd>X - x coordinate [0..ff]Y - y coordinate [0..bf]A - color [0..f] and bit 7 MSB x coordinate</dd></dl><hr><h3 id=a-namevdp_mode7_blank-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrct99xxmode7sl58vdp_mode7_blanka>vdp_mode7_blank</h3><blockquote><p>blank gfx mode 7 with</p></blockquote><dl><dt>In</dt><dd>Y - color to fill in GRB (3+3+2)</dd></dl><hr><h3 id=a-namevdp_mode7_on-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrct99xxmode7sl32vdp_mode7_ona>vdp_mode7_on</h3><blockquote><p>gfx 7 - each pixel can be addressed - e.g. for image</p></blockquote><hr><h3 id=a-namevdp_mode7_set_pixel-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrct99xxmode7_setpixelsl31vdp_mode7_set_pixela>vdp_mode7_set_pixel</h3><blockquote><p>VRAM ADDRESS = .X + 256*.Y</p></blockquote><dl><dt>In</dt><dd>X - x coordinate [0..ff]Y - y coordinate [0..bf]. A - color [0..ff] as GRB 332 (green bit 7-5, red bit 4-2, blue bit 1-0)</dd></dl><hr><h3 id=a-namevdp_mode_sprites_off-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrct99xxt99xx_spritessl31vdp_mode_sprites_offa>vdp_mode_sprites_off</h3><blockquote></blockquote><hr><h3 id=a-namevdp_set_reg-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrct99xxt99xxsl47vdp_set_rega>vdp_set_reg</h3><blockquote><p>set value to vdp register</p></blockquote><dl><dt>In</dt><dd>A - valueY - register</dd></dl><hr><h3 id=a-namevdp_text_blank-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrct99xxmode_textsl48vdp_text_blanka>vdp_text_blank</h3><blockquote><p>text mode blank screen and color vram</p></blockquote><hr><h3 id=a-namevdp_text_on-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrct99xxmode_textsl62vdp_text_ona>vdp_text_on</h3><blockquote><p>text mode - 40x24/80x24 character mode, 2 colors</p></blockquote><dl><dt>In</dt><dd>A - color settings (#R07)</dd></dl><hr><h3 id=a-namevdp_wait_cmd-target_blank-hrefhttpsgithubcomsteckschweincodetreemastersteckoslibsrct99xxt99xx_cmdsl31vdp_wait_cmda>vdp_wait_cmd</h3><blockquote><p>wait until a pending command has been finished</p></blockquote><hr></div></article></main></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__links><a class=footer__link href=/impressum/>Impressum</a></div><div class=footer__copyright>&copy; 2024 Steckschwein.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>